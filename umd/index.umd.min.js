!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.gsWeblangCore=e():t.gsWeblangCore=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var r={},o=n(2);r.Parser=n(3),r.Lexer=n(6),r.node=n(14),r.errors=n(1),r.Context=n(7),r.getParser=function(){return o(r)},t.exports=r},function(t,e,n){var r=n(23),o={};o.throwParserError=function(t,e){var n={error:e,on:t};throw r("PARSER ERROR: ",n),n},o.throwInterpreterError=function(t,e){throw new o.InterpreterException(e,t)},o.InterpreterException=function(t,e){this.message=t,this.on=e},o.InterpreterException.prototype=new Error,t.exports=o},function(t,e,n){var r=n(4);t.exports=function(t){function e(t){var e=[];if(")"!==t.token.id)for(;e.push(t.expression(0)),","===t.token.id;)t.advance(",");return e}function n(t){t.advance("(");var n=e(t);return t.advance(")"),n}function o(){var t=[];if(h.advance("("),")"!==h.token.id)for(;"name"!==h.token.arity&&h.error(h.token,"Se esperaba un nombre de parámetro."),t.push(h.token),h.advance(),","===h.token.id;)h.advance(",");return h.advance(")"),t}function i(){h.advance("(");var t=h.expression(0);return h.advance(")"),t}function s(){return h.block()||[]}function a(){return"{"===h.token.id?s():[h.statement()]}function u(e,n,r,o){var i=h.symbol(e);i.nud=function(){return new t.node.Constant(i,n,r,o)}}var h=new t.Parser(new t.Lexer),p=h;p.symbol("(end)"),p.symbol("(literal)").nud=function(){return new t.node.NumericLiteral(this,this.value)},p.symbol("(name)").nud=function(){return new t.node.Variable(this,this.value)},p.op("||",20,t.node.OrOperation),p.op("&&",25,t.node.AndOperation),p.op("+",50,t.node.SumOperation),p.op("-",50,t.node.DiffOperation),p.op("*",60,t.node.MulOperation),p.op(r.DIV,70,t.node.DivOperation),p.op(r.MOD,70,t.node.ModOperation),p.infixr("^",80,function(e){return new t.node.ExpOperation(h.token,e,h.expression(80))}),p.prefix(r.NOT,function(){return new t.node.NotOperation(h.token,h.expression(70))}),p.prefix("-",function(){return new t.node.SubstractionOperation(h.token,h.expression(70))}),p.op("==",40,t.node.EqOperation),p.op("/=",40,t.node.NotEqualOperation),p.op("<",40,t.node.LessOperation),p.op(">",40,t.node.GraterOperation),p.op("<=",40,t.node.LessEqualOperation),p.op(">=",40,t.node.GreaterEqualOperation),u(r.FALSE,"False",!1,r.BOOLEAN),u(r.TRUE,"True",!0,r.BOOLEAN),u(r.BLUE,"Blue",0,r.COLOR),u(r.RED,"Red",1,r.COLOR),u(r.BLACK,"Black",2,r.COLOR),u(r.GREEN,"Green",3,r.COLOR),u(r.NORTH,"North",[0,1],r.DIRECTION),u(r.SOUTH,"South",[0,-1],r.DIRECTION),u(r.EAST,"East",[1,0],r.DIRECTION),u(r.WEST,"West",[-1,0],r.DIRECTION),p.symbol(":"),p.symbol(")"),p.symbol("("),p.symbol("["),p.symbol("]"),p.symbol("}"),p.symbol(","),p.symbol("->"),p.symbol(".."),p.symbol(r.IN),p.symbol(r.ELSE),p.symbol(r.TO);var c={separator:";"};return p.stmt(";",function(){return c}),p.infix("(",80,function(n){"name"!==n.token.arity&&t.errors.throwParserError(n,n.token.value+" no es una función o procedimiento");var r=e(h);h.advance(")");var o;return o=n.token.value[0].toUpperCase()===n.token.value[0]?new t.node.ProcedureCall(n.token,function(){return h.scope.find(n.token.value)},r):new t.node.FunctionCall(n.token,function(){return h.scope.find(n.token.value)},r)}),p.infixr(":=",10,function(e){return"."===e.id||"["===e.id||e.token&&"name"===e.token.arity||h.error(e,"Del lado izquierdo de la asignación sólo pueden usarse identificadores"),new t.node.Assignment({},e,h.expression(9))}),p.stmt(r.DROP,function(){return new t.node.PutStone(h.token,n(h))}),p.stmt(r.GRAB,function(){return new t.node.RemoveStone(h.token,n(h))}),p.stmt(r.MOVE,function(){return new t.node.MoveClaw(h.token,n(h))}),p.stmt(r.MOVE_TO_EDGE,function(){return new t.node.MoveToEdge(h.token,n(h))}),p.stmt(r.CLEAN_BOARD,function(){return new t.node.CleanBoard(h.token,n(h))}),p.stmt(r.BOOM,function(){var e=h.token;return i(h)&&t.errors.throwParserError(e,"BOOM no lleva parámetros"),new t.node.Boom(e)}),p.prefix(r.HAS_STONES,function(){return new t.node.HasStones(h.token,n(h))}),p.prefix(r.NUM_STONES,function(){return new t.node.NumStones(h.token,n(h))}),p.prefix(r.MAX_COLOR,function(){return new t.node.MaxColor(h.token,n(h))}),p.prefix(r.MIN_COLOR,function(){return new t.node.MinColor(h.token,n(h))}),p.prefix(r.MAX_DIR,function(){return new t.node.MaxDir(h.token,n(h))}),p.prefix(r.MIN_DIR,function(){return new t.node.MinDir(h.token,n(h))}),p.prefix(r.MAX_BOOL,function(){return new t.node.MaxBool(h.token,n(h))}),p.prefix(r.MIN_BOOL,function(){return new t.node.MinBool(h.token,n(h))}),p.prefix(r.CAN_MOVE,function(){var e=h.token,r=n(h);return new t.node.CanMove(e,r)}),p.stmt(r.IF,function(){var e=h.token;h.advance("(");var n=h.expression(0);h.advance(")");var o=s(h),i=null;return h.token.id===r.ELSE&&(h.scope.reserve(h.token),h.advance(r.ELSE),i=s(h)),new t.node.If(e,n,o,i)}),p.stmt(r.SWITCH,function(){var e=h.token,n=i(h);h.token.id===r.TO&&h.advance(r.TO),h.advance("{");for(var o=[];;){var s=h.expression(0);h.advance("->");var u=a(h);if(o.push({case:s,body:u}),"}"===h.token.id||!h.tokens.hasNext())break}return h.advance("}"),new t.node.Switch(e,n,o)}),p.stmt(r.WHILE,function(){return new t.node.While(h.token,i(h),s(h))}),p.stmt(r.REPEAT,function(){return new t.node.Repeat(h.token,i(h),s(h))}),p.stmt(r.FOR_EACH,function(){var n=h.expression();"name"!==n.token.arity&&h.error(n.token,"El foreach espera un identificador sobre el cual iterar"),h.advance(r.IN),h.advance("[");var o=e(h);return h.advance("]"),new t.node.ForEach(h.token,n,o,h.block())}),p.stmt("{",function(){var t=h.statements();return h.advance("}"),t}),p.stmt("(",function(){var t=h.statements();return h.advance(")"),t}),p.prefix("(",function(){var t=h.expression(0);return h.advance(")"),t}),p.root(r.PROGRAM,function(){return new t.node.Program(h.token,h.block())}),p.root(r.FUNCTION,function(){h.newScope();var e=h.token;"name"===h.token.arity?(h.token.value[0]!==h.token.value[0].toLowerCase()&&h.error(e,"El nombre de la función "+e.value+" debe emepzar con minúscula"),h.scope.define(e),h.advance()):h.error(e,"Se esperaba un nombre de función");var n=o(h),i=s(h),a=i.pop();a&&"return"===a.alias&&a.expression||h.error(e,"La función "+e.value+" debe terminar con un "+r.RETURN),h.scope.pop();var u=new t.node.FunctionDeclaration(e,n,i,a);return e.declaration=u,u}),p.stmt(r.RETURN,function(){return new t.node.ReturnStatement(h.token,i(h))}),p.root(r.PROCEDURE,function(){h.newScope();var e=h.token;"name"===h.token.arity?(h.token.value[0]!==h.token.value[0].toUpperCase()&&h.error(e,"El nombre del procedimiento "+e.value+" debe emepzar con mayúscula"),h.scope.define(e),h.advance()):h.error(e,"Se esperaba un nombre de procedimiento");var n=o(h),r=s();h.scope.pop();var i=new t.node.ProcedureDeclaration(e,n,r);return e.declaration=i,i}),p.parse=function(e){for(var n,r=[],o=h.parseProgram(e),i=0;i<o.length;i++)"program"===o[i].alias?n=o[i]:r.push(o[i]);return new t.node.Root(n,r)},h}},function(t,e,n){function r(){i.throwParserError(this,"No definido")}function o(){i.throwParserError(this,"No se encontró el operador")}var i=n(1),s=n(5),a=function(){this.nud=r,this.led=o},u=function(t){this.scope=null,this.token=null,this.tokens=t,this.symbolTable={}};u.prototype.symbol=function(t,e){var n=this.symbolTable[t];return e=e||0,n?e>n.lbp&&(n.lbp=e):(n=new a,n.id=n.value=t,n.lbp=e,this.symbolTable[t]=n),n},u.prototype.expression=function(t){t=t||0;var e,n=this.token;for(this.advance(),e=n.nud();t<this.token.lbp;)n=this.token,this.advance(),e=n.led(e);return e},u.prototype.error=function(t,e){i.throwParserError(t,e)},u.prototype.newScope=function(){var t=this.scope;return this.scope=new s(this),this.scope.parent=t,this.scope},u.prototype.advance=function(t){var e,n,r,o,s=this.tokens;if(t&&this.token.id!==t&&(this.lastToken&&this.lastToken.range&&this.token.range&&(this.token.range.start=this.lastToken.range.start),i.throwParserError(this.token,'Se esperaba "'+t+'" pero se encontró "'+this.token.value+'"')),!s.hasNext()){var a=this.token.range;return this.token=this.symbolTable["(end)"],this.token.range=a,this.token}r=s.next(),o=r.value,e=r.type,"name"===e?(n=this.scope.find(o),"routine"===n.arity&&(n=this.symbolTable["(name)"])):"operator"===e?(n=this.symbolTable[o],n||i.throwParserError(r,"Unknown operator.")):"number"===e?(n=this.symbolTable["(literal)"],e="literal",o=parseInt(o,10)):i.throwParserError(r,"Unexpected token.");var u=Object.create(n);return u.range=r.range,u.value=o,u.arity=e,this.lastToken=this.token,this.token=u,u},u.prototype.op=function(t,e,n){var r=this,o=this.symbol(t,e);return o.led=function(t){return new n(this,t,r.expression(e))},o},u.prototype.statement=function(){var t,e=this.token;return e.std?(this.advance(),this.scope.reserve(e),e.std()):(t=this.expression(0),":="!==t.alias&&"("!==t.id&&"routine"!==t.arity&&i.throwParserError(t,"Bad expression statement."),t)},u.prototype.statements=function(){for(var t,e=[];"}"!==this.token.id&&"(end)"!==this.token.id;){var n=this._currentRange();t=this.statement(),t&&!t.separator&&(this._applyRangeToSymbol(n,t),e.push(t))}return 0===e.length?null:e},u.prototype._applyRangeToSymbol=function(t,e){e.range=t,this.token.range&&this.token.range.end&&(t.end=this.token.range.end)},u.prototype.rootDeclaration=function(){var t=this.token;return t.root||i.throwParserError(t,"Se esperaba una definición de programa, función o procedimiento."),this.advance(),this.scope.reserve(t),t.root()},u.prototype.stmt=function(t,e){var n=this.symbol(t);return n.std=e,n},u.prototype.infix=function(t,e,n){var r=this.symbol(t,e),o=this;return r.led=n||function(t){return this.left=t,this.right=o.expression(e),this.arity="binary",this},r},u.prototype.infixr=function(t,e,n){var r=this.symbol(t,e),o=this;return r.led=n||function(t){return this.left=t,this.right=o.expression(e-1),this.arity="binary",this},r},u.prototype.prefix=function(t,e){var n=this.symbol(t),r=this;return n.nud=e||function(){return r.scope.reserve(this),this.left=r.expression(70),this.arity="unary",this},n},u.prototype.root=function(t,e){var n=this.symbol(t);return n.root=e,n},u.prototype.block=function(){var t=this.token;return this.advance("{"),t.std()},u.prototype._currentRange=function(){return{start:this.token.range.start,end:this.token.range.end}},u.prototype.roots=function(){for(var t,e=[];"(end)"!==this.token.id;){var n=this._currentRange();t=this.rootDeclaration(),t&&(this._applyRangeToSymbol(n,t),e.push(t))}return 0===e.length?null:e},u.prototype._parseContextAwareNode=function(t,e){this.tokens.input(t),this.newScope(),this.advance();var n=e();return this.advance("(end)"),this.scope.pop(),n},u.prototype.parseExpression=function(t){var e=this;return this._parseContextAwareNode(t,function(){return e.expression(0)})},u.prototype.parseProgram=function(t){var e=this;return this._parseContextAwareNode(t,function(){return e.roots()})},u.prototype.parseStatements=function(t){var e=this;return this._parseContextAwareNode(t,function(){return e.statements()})},t.exports=u},function(t,e){var n={PROGRAM:"program",PROCEDURE:"procedure",FUNCTION:"function",RETURN:"return",DROP:"Poner",MOVE:"Mover",GRAB:"Sacar",BOOM:"BOOM",MOVE_TO_EDGE:"IrAlBorde",CLEAN_BOARD:"VaciarTablero",REPEAT:"repeat",WHILE:"while",FOR_EACH:"foreach",IN:"in",IF:"if",THEN:"then",ELSE:"else",SWITCH:"switch",TO:"to",OPPOSITE:"opuesto",NEXT:"siguiente",PREVIOUS:"previo",DIV:"div",MOD:"mod",NOT:"not",HAS_STONES:"hayBolitas",CAN_MOVE:"puedeMover",NUM_STONES:"nroBolitas",MIN_DIR:"minDir",MAX_DIR:"maxDir",MIN_COLOR:"minColor",MAX_COLOR:"maxColor",MIN_BOOL:"minBool",MAX_BOOL:"maxBool",RED:"Rojo",BLUE:"Azul",BLACK:"Negro",GREEN:"Verde",TRUE:"True",FALSE:"False",NORTH:"Norte",SOUTH:"Sur",EAST:"Este",WEST:"Oeste",BOOLEAN:"Booleano",COLOR:"Color",DIRECTION:"Dirección",NUMBER:"Número"};t.exports=n},function(t,e,n){function r(){return this}var o=n(1),i=function(t){this.parser=t,this.def={}};i.prototype.define=function(t){var e=this.def[t.value];return"object"==typeof e&&o.throwParserError(t,e.reserved?"Already reserved.":"Already defined."),this.def[t.value]=t,t.reserved=!1,t.nud=r,t.led=null,t.std=null,t.lbp=0,t.scope=this.parser.scope,t},i.prototype.find=function(t){for(var e,n=this;;){if(e=n.def[t],e&&"function"!=typeof e)return n.def[t];if(n=n.parent,!n)return e=this.parser.symbolTable[t],e&&"function"!=typeof e?e:this.parser.symbolTable["(name)"]}},i.prototype.pop=function(){this.scope=this.parent},i.prototype.reserve=function(t){if("name"===t.arity&&!t.reserved){var e=this.def[t.value];if(e){if(e.reserved)return;"name"===e.arity&&t.error("Already defined.")}this.def[t.value]=t,t.reserved=!0}},t.exports=i},function(t,e){function n(t,e){this.from=0,this.startColumn=0,this.endColumn=0,this.row=0,this.prefix=t||"/=-<>:|&.",this.suffix=e||"=|&>.",this.punctuators="/+-*^.:|&;,()<>{}[]=",this.i=0,this.buf=null,this.buflen=0}function r(t,e){return{error:e,on:t}}function o(t){return"\r"===t||"\n"===t}function i(t){return t>="0"&&t<="9"}function s(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||"_"===t||"'"===t}function a(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9"||"_"===t||"$"===t}n.prototype.hasNext=function(){return this._skipNonTokens(),this.from<this.buflen},n.prototype.input=function(t){this.from=0,this.i=0,this.startColumn=0,this.endColumn=0,this.row=0,this.buf=t,this.buflen=t.length,this.current=null,this.nextChar=null};var u={IDENTIFIER:"name",OPERATOR:"operator",EOF:"eof",COMMENT:"comment",NUMBER:"number",NEWLINE:"newline"};n.prototype.next=function(){do if(this._skipNonTokens(),this._refreshCurrentAndNextChars(),this.from>=this.buflen)return null;while(this._processComment());return this._processIdentifier()?this._consume(u.IDENTIFIER):this._processOperator()?this._consume(u.OPERATOR):this._processNumber()?this._consume(u.NUMBER):this._processError()},n.prototype._make=function(t,e){return{type:t,value:e,range:{start:{row:this.row,column:this.startColumn},end:{row:this.row,column:this.endColumn}}}},n.prototype._consume=function(t){var e=this.buf.substring(this.from,this.i),n=this._make(t,e);return this.from=this.i,this.startColumn=this.endColumn,n},n.prototype._refreshCurrentAndNextChars=function(){this.current=this.buf.charAt(this.from),this.nextChar=this.buf.charAt(this.from+1)},n.prototype._processOperator=function(){return this.punctuators.indexOf(this.current)>=0&&(this._increaseFrom(),this._processMultiCharOperator(),!0)},n.prototype._processMultiCharOperator=function(){this.prefix.indexOf(this.current)>=0&&this.suffix.indexOf(this.nextChar)>=0&&this._incrementStep()},n.prototype._processNumber=function(){if(i(this.current)){for(this._increaseFrom();this.i<this.buflen&&i(this.buf.charAt(this.i));)this._incrementStep();return!0}return!1},n.prototype._processError=function(){return this._increaseFrom(),r("Unmatched token",this._consume("UNMATCHED"))},n.prototype._resetColumnCount=function(){this.startColumn=this.endColumn},n.prototype._increaseFrom=function(){this.i=this.from+1,this.startColumn=this.startColumn+1,this.endColumn=this.startColumn},n.prototype._incrementStep=function(){this.i++,this.endColumn++},n.prototype._processIdentifier=function(){if(s(this.current)){for(this._increaseFrom();this.i<this.buflen&&a(this.buf.charAt(this.i));)this._incrementStep();return!0}return!1},n.prototype._skipNonTokens=function(){for(;this.from<this.buflen;){var t=this.buf.charAt(this.from);if(" "!==t&&"\t"!==t&&"\r"!==t&&"\n"!==t)break;o(t)?(this.row+=1,this.endColumn=0,this.startColumn=0):(this.startColumn++,this.endColumn=this.startColumn),this.from++,this.i=this.from}},n.prototype._processComment=function(){var t=this.current+this.nextChar;return this._processSingleLineComment(t)||this._processMultiLineComment(t)},n.prototype._processSingleLineComment=function(t){if("//"===t){for(;this.i<this.buflen&&!o(this.buf.charAt(this.i));)this._incrementStep();return this.from=this.i,this.row++,this.startColumn=0,this.endColumn=0,!0}},n.prototype._processMultiLineComment=function(t){if("/*"===t){for(this._incrementStep(),this._incrementStep();this.i<this.buflen&&"*"!==this.buf.charAt(this.i)&&"/"!==this.buf.charAt(this.i+1);)this._incrementStep(),o(this.buf.charAt(this.i))&&(this.endColumn=0);return this._incrementStep(),this._incrementStep(),this.from=this.i,this.endColumn=this.startColumn,!0}return!1},t.exports=n},function(t,e,n){var r=n(8),o=function(){var t=[],e=[],n=new r(9,9),o={};this.init=function(){n.init()},this.nativeRepresentations=function(){return r},this.board=function(){return n},this.put=function(t,e){o[t]=e},this.get=function(t){return o[t]},this.all=function(){return o},this.startContext=function(){t.push(o),o={}},this.stopContext=function(){o=t.pop()},this.pushBoard=function(){e.push(n),n=n.clone()},this.popBoard=function(){n=e.pop()},this.init()};t.exports=o},function(t,e){function n(t,e){this.x=0,this.y=0,this.sizeX=t,this.sizeY=e}var r=function(t){this.message=t};r.prototype=new Error("BOOM"),n.blue=0,n.red=1,n.black=2,n.green=3,n.north=[0,1],n.east=[1,0],n.south=[0,-1],n.west=[-1,0],n.minDir=n.north,n.maxDir=n.west,n.minColor=n.blue,n.maxColor=n.green,n.prototype.init=function(){this.table=[[],[],[],[]];for(var t=0;t<this.sizeX;t++){this.table[0][t]=[],this.table[1][t]=[],this.table[2][t]=[],this.table[3][t]=[];for(var e=0;e<this.sizeY;e++)this.table[0][t][e]=0,this.table[1][t][e]=0,this.table[2][t][e]=0,this.table[3][t][e]=0}},n.prototype.clone=function(){var t=new n(this.sizeX,this.sizeY);t.init();for(var e=0;e<this.sizeX;e++){t.table[0][e]=[],t.table[1][e]=[],t.table[2][e]=[],t.table[3][e]=[];for(var r=0;r<this.sizeY;r++)t.table[0][e][r]=this.table[0][e][r],t.table[1][e][r]=this.table[1][e][r],t.table[2][e][r]=this.table[2][e][r],t.table[3][e][r]=this.table[3][e][r]}return t.x=this.x,t.y=this.y,t},n.prototype.putStone=function(t){this.dropStones(t,1)},n.prototype.dropStones=function(t,e){this.table[t][this.x][this.y]+=e},n.prototype.removeStone=function(t){if(this.table[t][this.x][this.y]<=0)throw new r("Se intentó sacar una bolita pero ya no quedaban bolitas para sacar");this.table[t][this.x][this.y]-=1},n.prototype.boom=function(){throw new r("BOOM!")},n.prototype.clear=function(){this.init()},n.prototype.amountStones=function(t){return this.table[t][this.x][this.y]},n.prototype.canMove=function(t){var e=this.x+t[0],n=this.y+t[1];return e<this.sizeX&&e>=0&&n<this.sizeY&&n>=0},n.prototype.move=function(t){if(!this.canMove(t))throw new r("Te caiste del tablero por: x="+this.x+" y="+this.y);this.x+=t[0],this.y+=t[1]},n.prototype.moveToEdge=function(t){1===t[0]?this.x=this.sizeX-1:t[0]===-1?this.x=0:1===t[1]?this.y=this.sizeY-1:t[1]===-1&&(this.y=0)},n.prototype.printAscii=function(){for(var t=this.sizeX+"x"+this.sizeY+"\n",e=this.table[0],n=this.table[1],r=this.table[2],o=this.table[3],i=this.sizeY-1;i>=0;i--){for(var s=0;s<this.sizeX;s++)t+=e[s][i]||n[s][i]||r[s][i]||o[s][i]?"#":".";t+="\n"}return t},t.exports=n},function(t,e){t.exports=function(t,e){t.Assignment=function(t,n,r){this.token=t,this.arity=e.STM,this.alias=":=",this.left=n,this.right=r},t.Assignment.prototype.interpret=function(t){t.put(this.left.token.value,this.right.eval(t))}}},function(t,e){t.exports=function(t,e){function n(e){t[e]=function(t,e,n){r.call(this,t,e,n)},t[e].prototype=new r}var r=function(t,n,r){this.token=t,this.left=n,this.right=r,this.arity=e.BINARY};n("SumOperation"),t.SumOperation.prototype.eval=function(t){return this.left.eval(t)+this.right.eval(t)},n("DiffOperation"),t.DiffOperation.prototype.eval=function(t){return this.left.eval(t)-this.right.eval(t)},n("MulOperation"),t.MulOperation.prototype.eval=function(t){return this.left.eval(t)*this.right.eval(t)},n("DivOperation"),t.DivOperation.prototype.eval=function(t){return Math.floor(this.left.eval(t)/this.right.eval(t))},n("ModOperation"),t.ModOperation.prototype.eval=function(t){return this.left.eval(t)%this.right.eval(t)},n("ExpOperation"),t.ExpOperation.prototype.eval=function(t){return Math.pow(this.left.eval(t),this.right.eval(t))},n("AndOperation"),t.AndOperation.prototype.eval=function(t){return this.left.eval(t)&&this.right.eval(t)},n("OrOperation"),t.OrOperation.prototype.eval=function(t){return this.left.eval(t)||this.right.eval(t)},n("NotEqualOperation"),t.NotEqualOperation.prototype.eval=function(t){return this.left.eval(t)!==this.right.eval(t)},n("EqOperation"),t.EqOperation.prototype.eval=function(t){return this.left.eval(t)===this.right.eval(t)},n("LessOperation"),t.LessOperation.prototype.eval=function(t){return this.left.eval(t)<this.right.eval(t)},n("GraterOperation"),t.GraterOperation.prototype.eval=function(t){return this.left.eval(t)>this.right.eval(t)},n("LessEqualOperation"),t.LessEqualOperation.prototype.eval=function(t){return this.left.eval(t)<=this.right.eval(t)},n("GreaterEqualOperation"),t.GreaterEqualOperation.prototype.eval=function(t){return this.left.eval(t)>=this.right.eval(t)}}},function(t,e){t.exports=function(t){t.If=function(t,e,n,r){this.token=t,this.condition=e,this.trueBranch=n,this.falseBranch=r},t.If.prototype.interpret=function(e){return t.interpretBlock(this.condition.eval(e)?this.trueBranch:this.falseBranch,e)},t.Switch=function(t,e,n){this.token=t,this.expression=e,this.cases=n},t.Switch.prototype.interpret=function(e){for(var n=this.expression.eval(e),r=0;r<this.cases.length;r++)if(this.cases[r].case.eval(e)===n){t.interpretBlock(this.cases[r].body,e);break}return e}}},function(t,e){t.exports=function(t){t.Constant=function(t,e,n,r){this.token=t,this.value=n,this.alias=e,this.type=r},t.Constant.prototype.eval=function(){return this.value}}},function(t,e){t.exports=function(t){t.NumericLiteral=function(t,e){this.token=t,this.value=e},t.NumericLiteral.prototype.type="number",t.NumericLiteral.prototype.eval=function(){return this.value}}},function(t,e,n){var r={};r.errors=n(1);var o={STM:"statement",BINARY:"binary",EXPRESSION:"binary"};r.interpretBlock=function(t,e){t=t||[];for(var n=0;n<t.length;n++)t[n].interpret(e);return e},n(13)(r,o),n(12)(r,o),n(22)(r,o),n(9)(r,o),n(11)(r,o),n(10)(r,o),n(21)(r,o),n(15)(r,o),n(16)(r,o),n(19)(r,o),n(20)(r,o),n(18)(r,o),n(17)(r,o),t.exports=r},function(t,e){t.exports=function(t,e){t.HasStones=function(t,n){this.token=t,this.arity=e.EXPRESSION,this.name="hasStones",this.parameters=n},t.HasStones.prototype.eval=function(t){return t.board().amountStones(this.parameters[0].eval(t))>0},t.CanMove=function(t,n){this.token=t,this.arity=e.EXPRESSION,this.name="canMove",this.parameters=n},t.CanMove.prototype.eval=function(t){return t.board().canMove(this.parameters[0].eval(t))},t.NumStones=function(t,n){this.token=t,this.arity=e.EXPRESSION,this.name="numStones",this.parameters=n},t.NumStones.prototype.eval=function(t){return t.board().amountStones(this.parameters[0].eval(t))},t.MinDir=function(t,n){this.token=t,this.arity=e.EXPRESSION,this.name="minDir",this.parameters=n},t.MinDir.prototype.eval=function(t){return t.nativeRepresentations().minDir},t.MaxDir=function(t,n){this.token=t,this.arity=e.EXPRESSION,this.name="maxDir",this.parameters=n},t.MaxDir.prototype.eval=function(t){return t.nativeRepresentations().maxDir},t.MaxColor=function(t,n){this.token=t,this.arity=e.EXPRESSION,this.name="maxColor",this.parameters=n},t.MaxColor.prototype.eval=function(t){return t.nativeRepresentations().maxColor},t.MinColor=function(t,n){this.token=t,this.arity=e.EXPRESSION,this.name="minColor",this.parameters=n},t.MinColor.prototype.eval=function(t){return t.nativeRepresentations().minColor},t.MinBool=function(t,n){this.token=t,this.arity=e.EXPRESSION,this.name="minBool",this.parameters=n},t.MinBool.prototype.eval=function(){return!1},t.MaxBool=function(t,n){this.token=t,this.arity=e.EXPRESSION,this.name="maxBool",this.parameters=n},t.MaxBool.prototype.eval=function(){return!0}}},function(t,e){t.exports=function(t,e){t.MoveClaw=function(t,n){this.token=t,this.arity=e.STM,this.name="MoveClaw",this.parameters=n},t.MoveClaw.prototype.interpret=function(t){try{t.board().move(this.parameters[0].eval(t))}catch(t){throw t.on=this.token,t}return t},t.RemoveStone=function(t,n){this.token=t,this.arity=e.STM,this.name="Grab",this.parameters=n},t.RemoveStone.prototype.interpret=function(t){try{t.board().removeStone(this.parameters[0].eval(t))}catch(t){throw t.on=this.token,t}return t},t.PutStone=function(t,n){this.token=t,this.arity=e.STM,this.name="Drop",this.parameters=n},t.PutStone.prototype.interpret=function(t){return t.board().putStone(this.parameters[0].eval(t)),t},t.MoveToEdge=function(t,n){this.token=t,this.arity=e.STM,this.name="MoveToEdge",this.parameters=n},t.MoveToEdge.prototype.interpret=function(t){return t.board().moveToEdge(this.parameters[0].eval(t)),t},t.CleanBoard=function(t,n){this.token=t,this.arity=e.STM,this.name="MoveToEdge",this.parameters=n},t.CleanBoard.prototype.interpret=function(t){return t.board().clear(),t},t.Boom=function(t){this.token=t,this.arity=e.STM,this.name="BOOM"},t.Boom.prototype.interpret=function(e){try{e.board().boom()}catch(e){throw e.on=t,e}return e}}},function(t,e){t.exports=function(t){t.Program=function(t,e){this.token=t,this.alias="program",this.body=e||[]},t.Program.prototype.interpret=function(e){return t.interpretBlock(this.body,e),e},t.Root=function(t,e){this.alias="root",this.program=t,this.declarations=e},t.Root.prototype.interpret=function(t){return this.program.interpret(t),t}}},function(t,e){t.exports=function(t){t.While=function(t,e,n){this.alias="while",this.token=t,this.expression=e,this.body=n},t.While.prototype.interpret=function(e){for(;this.expression.eval(e);)t.interpretBlock(this.body,e);return e},t.Repeat=function(t,e,n){this.alias="repeat",this.token=t,this.expression=e,this.body=n},t.Repeat.prototype.interpret=function(e){for(var n=this.expression.eval(e),r=0;r<n;r++)t.interpretBlock(this.body,e);return e},t.ForEach=function(t,e,n,r){this.alias="foreach",this.token=t,this.iterator=e,this.items=n,this.body=r},t.ForEach.prototype.interpret=function(e){for(var n=0;n<this.items.length;n++)e.put(this.iterator.token.value,this.items[n].eval(e)),t.interpretBlock(this.body,e);return e}}},function(t,e){t.exports=function(t){function e(t,e){var n=[];if(e)for(var r=0;r<e.length;r++)n.push(e[r].eval(t));return n}function n(t,e,n){if(n.parameters)for(var r=0;r<n.parameters.length;r++)t.put(n.parameters[r].value,e[r])}t.ProcedureCall=function(t,e,n){this.token=t,this.arity="routine",this.alias="ProcedureCall",this.name=t.value,this.parameters=n,this.declarationProvider=e},t.ProcedureCall.prototype.interpret=function(r){var o=this.declarationProvider();if(!o.declaration)throw new t.errors.InterpreterException("El procedimiento "+this.name+" no se encuentra definido.",this.node);var i=o.declaration,s=e(r,this.parameters);return r.startContext(),n(r,s,i),t.interpretBlock(i.body,r),r.stopContext(),r},t.FunctionCall=function(t,e,n){this.token=t,this.arity="routine",this.alias="FunctionCall",this.name=t.value,this.parameters=n,this.declarationProvider=e},t.FunctionCall.prototype.eval=function(r){var o=this.declarationProvider();if(!o.declaration)throw new t.errors.InterpreterException('La función "'+this.name+'" no se encuentra definida.',this.node);var i=o.declaration,s=e(r,this.parameters);r.startContext(),r.pushBoard(),n(r,s,i),t.interpretBlock(o.body,r);var a=i.return.expression.eval(r);return r.popBoard(),r.stopContext(),a}}},function(t,e){t.exports=function(t){t.ProcedureDeclaration=function(t,e,n){this.token=t,this.name=t.value,this.arity="routine",this.alias="procedureDeclaration",this.parameters=e||[],this.body=n||[]},t.FunctionDeclaration=function(t,e,n,r){this.token=t,this.name=t.value,this.arity="routine",this.alias="functionDeclaration",this.parameters=e||[],this.body=n||[],this.return=r},t.ReturnStatement=function(t,e){this.token=t,this.alias="return",this.expression=e}}},function(t,e){t.exports=function(t){t.NotOperation=function(t,e){this.token=t,this.expression=e},t.NotOperation.prototype.eval=function(t){return!this.expression.eval(t)},t.SubstractionOperation=function(t,e){this.token=t,this.expression=e},t.SubstractionOperation.prototype.eval=function(t){return-this.expression.eval(t)}}},function(t,e){t.exports=function(t){return t.Variable=function(t,e){this.token=t,this.id=e},t.Variable.prototype.eval=function(t){return t.get(this.id)},t}},function(t,e){var n=function(){};t.exports=console&&console.log?console.log:n}])});
//# sourceMappingURL=index.umd.min.js.map