!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.gsWeblangCore=n():t.gsWeblangCore=n()}(this,function(){return function(t){function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){var r={},i=e(12);r.Parser=e(13),r.Lexer=e(15),r.node=e(25),r.errors=e(2),r.Context=e(17),r.Board=e(4),r.i18n=e(7),r.config=e(6),r.gbb={reader:e(11),builder:e(10)},r.viewAdapter=e(8),r.getParser=function(){return i(r)},t.exports=r},function(t,n,e){var r;(function(t,i){(function(){function o(t,n){return t.set(n[0],n[1]),t}function u(t,n){return t.add(n),t}function a(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2])}return t.apply(n,e)}function s(t,n,e,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var u=t[i];n(r,u,e(u),t)}return r}function c(t,n){for(var e=-1,r=null==t?0:t.length;++e<r&&n(t[e],e,t)!==!1;);return t}function f(t,n){for(var e=null==t?0:t.length;e--&&n(t[e],e,t)!==!1;);return t}function l(t,n){for(var e=-1,r=null==t?0:t.length;++e<r;)if(!n(t[e],e,t))return!1;return!0}function h(t,n){for(var e=-1,r=null==t?0:t.length,i=0,o=[];++e<r;){var u=t[e];n(u,e,t)&&(o[i++]=u)}return o}function p(t,n){var e=null==t?0:t.length;return!!e&&k(t,n,0)>-1}function v(t,n,e){for(var r=-1,i=null==t?0:t.length;++r<i;)if(e(n,t[r]))return!0;return!1}function d(t,n){for(var e=-1,r=null==t?0:t.length,i=Array(r);++e<r;)i[e]=n(t[e],e,t);return i}function _(t,n){for(var e=-1,r=n.length,i=t.length;++e<r;)t[i+e]=n[e];return t}function y(t,n,e,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(e=t[++i]);++i<o;)e=n(e,t[i],i,t);return e}function m(t,n,e,r){var i=null==t?0:t.length;for(r&&i&&(e=t[--i]);i--;)e=n(e,t[i],i,t);return e}function g(t,n){for(var e=-1,r=null==t?0:t.length;++e<r;)if(n(t[e],e,t))return!0;return!1}function b(t){return t.split("")}function x(t){return t.match($n)||[]}function w(t,n,e){var r;return e(t,function(t,e,i){if(n(t,e,i))return r=e,!1}),r}function E(t,n,e,r){for(var i=t.length,o=e+(r?1:-1);r?o--:++o<i;)if(n(t[o],o,t))return o;return-1}function k(t,n,e){return n===n?Z(t,n,e):E(t,S,e)}function O(t,n,e,r){for(var i=e-1,o=t.length;++i<o;)if(r(t[i],n))return i;return-1}function S(t){return t!==t}function R(t,n){var e=null==t?0:t.length;return e?N(t,n)/e:Dt}function C(t){return function(n){return null==n?it:n[t]}}function T(t){return function(n){return null==t?it:t[n]}}function I(t,n,e,r,i){return i(t,function(t,i,o){e=r?(r=!1,t):n(e,t,i,o)}),e}function A(t,n){var e=t.length;for(t.sort(n);e--;)t[e]=t[e].value;return t}function N(t,n){for(var e,r=-1,i=t.length;++r<i;){var o=n(t[r]);o!==it&&(e=e===it?o:e+o)}return e}function M(t,n){for(var e=-1,r=Array(t);++e<t;)r[e]=n(e);return r}function L(t,n){return d(n,function(n){return[n,t[n]]})}function B(t){return function(n){return t(n)}}function j(t,n){return d(n,function(n){return t[n]})}function D(t,n){return t.has(n)}function P(t,n){for(var e=-1,r=t.length;++e<r&&k(n,t[e],0)>-1;);return e}function z(t,n){for(var e=t.length;e--&&k(n,t[e],0)>-1;);return e}function U(t,n){for(var e=t.length,r=0;e--;)t[e]===n&&++r;return r}function W(t){return"\\"+er[t]}function F(t,n){return null==t?it:t[n]}function G(t){return Xe.test(t)}function $(t){return He.test(t)}function V(t){for(var n,e=[];!(n=t.next()).done;)e.push(n.value);return e}function q(t){var n=-1,e=Array(t.size);return t.forEach(function(t,r){e[++n]=[r,t]}),e}function X(t,n){return function(e){return t(n(e))}}function H(t,n){for(var e=-1,r=t.length,i=0,o=[];++e<r;){var u=t[e];u!==n&&u!==lt||(t[e]=lt,o[i++]=e)}return o}function K(t){var n=-1,e=Array(t.size);return t.forEach(function(t){e[++n]=t}),e}function Y(t){var n=-1,e=Array(t.size);return t.forEach(function(t){e[++n]=[t,t]}),e}function Z(t,n,e){for(var r=e-1,i=t.length;++r<i;)if(t[r]===n)return r;return-1}function J(t,n,e){for(var r=e+1;r--;)if(t[r]===n)return r;return r}function Q(t){return G(t)?nt(t):gr(t)}function tt(t){return G(t)?et(t):b(t)}function nt(t){for(var n=Ve.lastIndex=0;Ve.test(t);)++n;return n}function et(t){return t.match(Ve)||[]}function rt(t){return t.match(qe)||[]}var it,ot="4.17.4",ut=200,at="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",st="Expected a function",ct="__lodash_hash_undefined__",ft=500,lt="__lodash_placeholder__",ht=1,pt=2,vt=4,dt=1,_t=2,yt=1,mt=2,gt=4,bt=8,xt=16,wt=32,Et=64,kt=128,Ot=256,St=512,Rt=30,Ct="...",Tt=800,It=16,At=1,Nt=2,Mt=3,Lt=1/0,Bt=9007199254740991,jt=1.7976931348623157e308,Dt=NaN,Pt=4294967295,zt=Pt-1,Ut=Pt>>>1,Wt=[["ary",kt],["bind",yt],["bindKey",mt],["curry",bt],["curryRight",xt],["flip",St],["partial",wt],["partialRight",Et],["rearg",Ot]],Ft="[object Arguments]",Gt="[object Array]",$t="[object AsyncFunction]",Vt="[object Boolean]",qt="[object Date]",Xt="[object DOMException]",Ht="[object Error]",Kt="[object Function]",Yt="[object GeneratorFunction]",Zt="[object Map]",Jt="[object Number]",Qt="[object Null]",tn="[object Object]",nn="[object Promise]",en="[object Proxy]",rn="[object RegExp]",on="[object Set]",un="[object String]",an="[object Symbol]",sn="[object Undefined]",cn="[object WeakMap]",fn="[object WeakSet]",ln="[object ArrayBuffer]",hn="[object DataView]",pn="[object Float32Array]",vn="[object Float64Array]",dn="[object Int8Array]",_n="[object Int16Array]",yn="[object Int32Array]",mn="[object Uint8Array]",gn="[object Uint8ClampedArray]",bn="[object Uint16Array]",xn="[object Uint32Array]",wn=/\b__p \+= '';/g,En=/\b(__p \+=) '' \+/g,kn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,On=/&(?:amp|lt|gt|quot|#39);/g,Sn=/[&<>"']/g,Rn=RegExp(On.source),Cn=RegExp(Sn.source),Tn=/<%-([\s\S]+?)%>/g,In=/<%([\s\S]+?)%>/g,An=/<%=([\s\S]+?)%>/g,Nn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Mn=/^\w*$/,Ln=/^\./,Bn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jn=/[\\^$.*+?()[\]{}|]/g,Dn=RegExp(jn.source),Pn=/^\s+|\s+$/g,zn=/^\s+/,Un=/\s+$/,Wn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Fn=/\{\n\/\* \[wrapped with (.+)\] \*/,Gn=/,? & /,$n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Vn=/\\(\\)?/g,qn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Xn=/\w*$/,Hn=/^[-+]0x[0-9a-f]+$/i,Kn=/^0b[01]+$/i,Yn=/^\[object .+?Constructor\]$/,Zn=/^0o[0-7]+$/i,Jn=/^(?:0|[1-9]\d*)$/,Qn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,te=/($^)/,ne=/['\n\r\u2028\u2029\\]/g,ee="\\ud800-\\udfff",re="\\u0300-\\u036f",ie="\\ufe20-\\ufe2f",oe="\\u20d0-\\u20ff",ue=re+ie+oe,ae="\\u2700-\\u27bf",se="a-z\\xdf-\\xf6\\xf8-\\xff",ce="\\xac\\xb1\\xd7\\xf7",fe="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",le="\\u2000-\\u206f",he=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pe="A-Z\\xc0-\\xd6\\xd8-\\xde",ve="\\ufe0e\\ufe0f",de=ce+fe+le+he,_e="['’]",ye="["+ee+"]",me="["+de+"]",ge="["+ue+"]",be="\\d+",xe="["+ae+"]",we="["+se+"]",Ee="[^"+ee+de+be+ae+se+pe+"]",ke="\\ud83c[\\udffb-\\udfff]",Oe="(?:"+ge+"|"+ke+")",Se="[^"+ee+"]",Re="(?:\\ud83c[\\udde6-\\uddff]){2}",Ce="[\\ud800-\\udbff][\\udc00-\\udfff]",Te="["+pe+"]",Ie="\\u200d",Ae="(?:"+we+"|"+Ee+")",Ne="(?:"+Te+"|"+Ee+")",Me="(?:"+_e+"(?:d|ll|m|re|s|t|ve))?",Le="(?:"+_e+"(?:D|LL|M|RE|S|T|VE))?",Be=Oe+"?",je="["+ve+"]?",De="(?:"+Ie+"(?:"+[Se,Re,Ce].join("|")+")"+je+Be+")*",Pe="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",ze="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",Ue=je+Be+De,We="(?:"+[xe,Re,Ce].join("|")+")"+Ue,Fe="(?:"+[Se+ge+"?",ge,Re,Ce,ye].join("|")+")",Ge=RegExp(_e,"g"),$e=RegExp(ge,"g"),Ve=RegExp(ke+"(?="+ke+")|"+Fe+Ue,"g"),qe=RegExp([Te+"?"+we+"+"+Me+"(?="+[me,Te,"$"].join("|")+")",Ne+"+"+Le+"(?="+[me,Te+Ae,"$"].join("|")+")",Te+"?"+Ae+"+"+Me,Te+"+"+Le,ze,Pe,be,We].join("|"),"g"),Xe=RegExp("["+Ie+ee+ue+ve+"]"),He=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ke=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ye=-1,Ze={};Ze[pn]=Ze[vn]=Ze[dn]=Ze[_n]=Ze[yn]=Ze[mn]=Ze[gn]=Ze[bn]=Ze[xn]=!0,Ze[Ft]=Ze[Gt]=Ze[ln]=Ze[Vt]=Ze[hn]=Ze[qt]=Ze[Ht]=Ze[Kt]=Ze[Zt]=Ze[Jt]=Ze[tn]=Ze[rn]=Ze[on]=Ze[un]=Ze[cn]=!1;var Je={};Je[Ft]=Je[Gt]=Je[ln]=Je[hn]=Je[Vt]=Je[qt]=Je[pn]=Je[vn]=Je[dn]=Je[_n]=Je[yn]=Je[Zt]=Je[Jt]=Je[tn]=Je[rn]=Je[on]=Je[un]=Je[an]=Je[mn]=Je[gn]=Je[bn]=Je[xn]=!0,Je[Ht]=Je[Kt]=Je[cn]=!1;var Qe={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},tr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},nr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},er={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},rr=parseFloat,ir=parseInt,or="object"==typeof t&&t&&t.Object===Object&&t,ur="object"==typeof self&&self&&self.Object===Object&&self,ar=or||ur||Function("return this")(),sr="object"==typeof n&&n&&!n.nodeType&&n,cr=sr&&"object"==typeof i&&i&&!i.nodeType&&i,fr=cr&&cr.exports===sr,lr=fr&&or.process,hr=function(){try{return lr&&lr.binding&&lr.binding("util")}catch(t){}}(),pr=hr&&hr.isArrayBuffer,vr=hr&&hr.isDate,dr=hr&&hr.isMap,_r=hr&&hr.isRegExp,yr=hr&&hr.isSet,mr=hr&&hr.isTypedArray,gr=C("length"),br=T(Qe),xr=T(tr),wr=T(nr),Er=function t(n){function e(t){if(cs(t)&&!xh(t)&&!(t instanceof b)){if(t instanceof i)return t;if(xf.call(t,"__wrapped__"))return uu(t)}return new i(t)}function r(){}function i(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=it}function b(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Pt,this.__views__=[]}function T(){var t=new b(this.__wrapped__);return t.__actions__=Ui(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ui(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ui(this.__views__),t}function Z(){if(this.__filtered__){var t=new b(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function nt(){var t=this.__wrapped__.value(),n=this.__dir__,e=xh(t),r=n<0,i=e?t.length:0,o=Io(0,i,this.__views__),u=o.start,a=o.end,s=a-u,c=r?a:u-1,f=this.__iteratees__,l=f.length,h=0,p=Zf(s,this.__takeCount__);if(!e||!r&&i==s&&p==s)return xi(t,this.__actions__);var v=[];t:for(;s--&&h<p;){c+=n;for(var d=-1,_=t[c];++d<l;){var y=f[d],m=y.iteratee,g=y.type,b=m(_);if(g==Nt)_=b;else if(!b){if(g==At)continue t;break t}}v[h++]=_}return v}function et(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function $n(){this.__data__=al?al(null):{},this.size=0}function ee(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}function re(t){var n=this.__data__;if(al){var e=n[t];return e===ct?it:e}return xf.call(n,t)?n[t]:it}function ie(t){var n=this.__data__;return al?n[t]!==it:xf.call(n,t)}function oe(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=al&&n===it?ct:n,this}function ue(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function ae(){this.__data__=[],this.size=0}function se(t){var n=this.__data__,e=Me(n,t);if(e<0)return!1;var r=n.length-1;return e==r?n.pop():Bf.call(n,e,1),--this.size,!0}function ce(t){var n=this.__data__,e=Me(n,t);return e<0?it:n[e][1]}function fe(t){return Me(this.__data__,t)>-1}function le(t,n){var e=this.__data__,r=Me(e,t);return r<0?(++this.size,e.push([t,n])):e[r][1]=n,this}function he(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function pe(){this.size=0,this.__data__={hash:new et,map:new(rl||ue),string:new et}}function ve(t){var n=So(this,t).delete(t);return this.size-=n?1:0,n}function de(t){return So(this,t).get(t)}function _e(t){return So(this,t).has(t)}function ye(t,n){var e=So(this,t),r=e.size;return e.set(t,n),this.size+=e.size==r?0:1,this}function me(t){var n=-1,e=null==t?0:t.length;for(this.__data__=new he;++n<e;)this.add(t[n])}function ge(t){return this.__data__.set(t,ct),this}function be(t){return this.__data__.has(t)}function xe(t){var n=this.__data__=new ue(t);this.size=n.size}function we(){this.__data__=new ue,this.size=0}function Ee(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e}function ke(t){return this.__data__.get(t)}function Oe(t){return this.__data__.has(t)}function Se(t,n){var e=this.__data__;if(e instanceof ue){var r=e.__data__;if(!rl||r.length<ut-1)return r.push([t,n]),this.size=++e.size,this;e=this.__data__=new he(r)}return e.set(t,n),this.size=e.size,this}function Re(t,n){var e=xh(t),r=!e&&bh(t),i=!e&&!r&&Eh(t),o=!e&&!r&&!i&&Ch(t),u=e||r||i||o,a=u?M(t.length,vf):[],s=a.length;for(var c in t)!n&&!xf.call(t,c)||u&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Po(c,s))||a.push(c);return a}function Ce(t){var n=t.length;return n?t[ei(0,n-1)]:it}function Te(t,n){return eu(Ui(t),ze(n,0,t.length))}function Ie(t){return eu(Ui(t))}function Ae(t,n,e){(e===it||Ka(t[n],e))&&(e!==it||n in t)||De(t,n,e)}function Ne(t,n,e){var r=t[n];xf.call(t,n)&&Ka(r,e)&&(e!==it||n in t)||De(t,n,e)}function Me(t,n){for(var e=t.length;e--;)if(Ka(t[e][0],n))return e;return-1}function Le(t,n,e,r){return gl(t,function(t,i,o){n(r,t,e(t),o)}),r}function Be(t,n){return t&&Wi(n,$s(n),t)}function je(t,n){return t&&Wi(n,Vs(n),t)}function De(t,n,e){"__proto__"==n&&zf?zf(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e}function Pe(t,n){for(var e=-1,r=n.length,i=af(r),o=null==t;++e<r;)i[e]=o?it:Ws(t,n[e]);return i}function ze(t,n,e){return t===t&&(e!==it&&(t=t<=e?t:e),n!==it&&(t=t>=n?t:n)),t}function Ue(t,n,e,r,i,o){var u,a=n&ht,s=n&pt,f=n&vt;if(e&&(u=i?e(t,r,i,o):e(t)),u!==it)return u;if(!ss(t))return t;var l=xh(t);if(l){if(u=Mo(t),!a)return Ui(t,u)}else{var h=Al(t),p=h==Kt||h==Yt;if(Eh(t))return Ci(t,a);if(h==tn||h==Ft||p&&!i){if(u=s||p?{}:Lo(t),!a)return s?Gi(t,je(u,t)):Fi(t,Be(u,t))}else{if(!Je[h])return i?t:{};u=Bo(t,h,Ue,a)}}o||(o=new xe);var v=o.get(t);if(v)return v;o.set(t,u);var d=f?s?wo:xo:s?Vs:$s,_=l?it:d(t);return c(_||t,function(r,i){_&&(i=r,r=t[i]),Ne(u,i,Ue(r,n,e,i,t,o))}),u}function We(t){var n=$s(t);return function(e){return Fe(e,t,n)}}function Fe(t,n,e){var r=e.length;if(null==t)return!r;for(t=hf(t);r--;){var i=e[r],o=n[i],u=t[i];if(u===it&&!(i in t)||!o(u))return!1}return!0}function Ve(t,n,e){if("function"!=typeof t)throw new df(st);return Ll(function(){t.apply(it,e)},n)}function qe(t,n,e,r){var i=-1,o=p,u=!0,a=t.length,s=[],c=n.length;if(!a)return s;e&&(n=d(n,B(e))),r?(o=v,u=!1):n.length>=ut&&(o=D,u=!1,n=new me(n));t:for(;++i<a;){var f=t[i],l=null==e?f:e(f);if(f=r||0!==f?f:0,u&&l===l){for(var h=c;h--;)if(n[h]===l)continue t;s.push(f)}else o(n,l,r)||s.push(f)}return s}function Xe(t,n){var e=!0;return gl(t,function(t,r,i){return e=!!n(t,r,i)}),e}function He(t,n,e){for(var r=-1,i=t.length;++r<i;){var o=t[r],u=n(o);if(null!=u&&(a===it?u===u&&!bs(u):e(u,a)))var a=u,s=o}return s}function Qe(t,n,e,r){var i=t.length;for(e=Ss(e),e<0&&(e=-e>i?0:i+e),r=r===it||r>i?i:Ss(r),r<0&&(r+=i),r=e>r?0:Rs(r);e<r;)t[e++]=n;return t}function tr(t,n){var e=[];return gl(t,function(t,r,i){n(t,r,i)&&e.push(t)}),e}function nr(t,n,e,r,i){var o=-1,u=t.length;for(e||(e=Do),i||(i=[]);++o<u;){var a=t[o];n>0&&e(a)?n>1?nr(a,n-1,e,r,i):_(i,a):r||(i[i.length]=a)}return i}function er(t,n){return t&&xl(t,n,$s)}function or(t,n){return t&&wl(t,n,$s)}function ur(t,n){return h(n,function(n){return os(t[n])})}function sr(t,n){n=Si(n,t);for(var e=0,r=n.length;null!=t&&e<r;)t=t[ru(n[e++])];return e&&e==r?t:it}function cr(t,n,e){var r=n(t);return xh(t)?r:_(r,e(t))}function lr(t){return null==t?t===it?sn:Qt:Pf&&Pf in hf(t)?To(t):Yo(t)}function hr(t,n){return t>n}function gr(t,n){return null!=t&&xf.call(t,n)}function Er(t,n){return null!=t&&n in hf(t)}function Or(t,n,e){return t>=Zf(n,e)&&t<Yf(n,e)}function Sr(t,n,e){for(var r=e?v:p,i=t[0].length,o=t.length,u=o,a=af(o),s=1/0,c=[];u--;){var f=t[u];u&&n&&(f=d(f,B(n))),s=Zf(f.length,s),a[u]=!e&&(n||i>=120&&f.length>=120)?new me(u&&f):it}f=t[0];var l=-1,h=a[0];t:for(;++l<i&&c.length<s;){var _=f[l],y=n?n(_):_;if(_=e||0!==_?_:0,!(h?D(h,y):r(c,y,e))){for(u=o;--u;){var m=a[u];if(!(m?D(m,y):r(t[u],y,e)))continue t}h&&h.push(y),c.push(_)}}return c}function Rr(t,n,e,r){return er(t,function(t,i,o){n(r,e(t),i,o)}),r}function Cr(t,n,e){n=Si(n,t),t=Jo(t,n);var r=null==t?t:t[ru(Ou(n))];return null==r?it:a(r,t,e)}function Tr(t){return cs(t)&&lr(t)==Ft}function Ir(t){return cs(t)&&lr(t)==ln}function Ar(t){return cs(t)&&lr(t)==qt}function Nr(t,n,e,r,i){return t===n||(null==t||null==n||!cs(t)&&!cs(n)?t!==t&&n!==n:Mr(t,n,e,r,Nr,i))}function Mr(t,n,e,r,i,o){var u=xh(t),a=xh(n),s=u?Gt:Al(t),c=a?Gt:Al(n);s=s==Ft?tn:s,c=c==Ft?tn:c;var f=s==tn,l=c==tn,h=s==c;if(h&&Eh(t)){if(!Eh(n))return!1;u=!0,f=!1}if(h&&!f)return o||(o=new xe),u||Ch(t)?yo(t,n,e,r,i,o):mo(t,n,s,e,r,i,o);if(!(e&dt)){var p=f&&xf.call(t,"__wrapped__"),v=l&&xf.call(n,"__wrapped__");if(p||v){var d=p?t.value():t,_=v?n.value():n;return o||(o=new xe),i(d,_,e,r,o)}}return!!h&&(o||(o=new xe),go(t,n,e,r,i,o))}function Lr(t){return cs(t)&&Al(t)==Zt}function Br(t,n,e,r){var i=e.length,o=i,u=!r;if(null==t)return!o;for(t=hf(t);i--;){var a=e[i];if(u&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){a=e[i];var s=a[0],c=t[s],f=a[1];if(u&&a[2]){if(c===it&&!(s in t))return!1}else{var l=new xe;if(r)var h=r(c,f,s,t,n,l);if(!(h===it?Nr(f,c,dt|_t,r,l):h))return!1}}return!0}function jr(t){if(!ss(t)||Go(t))return!1;var n=os(t)?Rf:Yn;return n.test(iu(t))}function Dr(t){return cs(t)&&lr(t)==rn}function Pr(t){return cs(t)&&Al(t)==on}function zr(t){return cs(t)&&as(t.length)&&!!Ze[lr(t)]}function Ur(t){return"function"==typeof t?t:null==t?Lc:"object"==typeof t?xh(t)?qr(t[0],t[1]):Vr(t):Fc(t)}function Wr(t){if(!$o(t))return Kf(t);var n=[];for(var e in hf(t))xf.call(t,e)&&"constructor"!=e&&n.push(e);return n}function Fr(t){if(!ss(t))return Ko(t);var n=$o(t),e=[];for(var r in t)("constructor"!=r||!n&&xf.call(t,r))&&e.push(r);return e}function Gr(t,n){return t<n}function $r(t,n){var e=-1,r=Ya(t)?af(t.length):[];return gl(t,function(t,i,o){r[++e]=n(t,i,o)}),r}function Vr(t){var n=Ro(t);return 1==n.length&&n[0][2]?qo(n[0][0],n[0][1]):function(e){return e===t||Br(e,t,n)}}function qr(t,n){return Uo(t)&&Vo(n)?qo(ru(t),n):function(e){var r=Ws(e,t);return r===it&&r===n?Gs(e,t):Nr(n,r,dt|_t)}}function Xr(t,n,e,r,i){t!==n&&xl(n,function(o,u){if(ss(o))i||(i=new xe),Hr(t,n,u,e,Xr,r,i);else{var a=r?r(t[u],o,u+"",t,n,i):it;a===it&&(a=o),Ae(t,u,a)}},Vs)}function Hr(t,n,e,r,i,o,u){var a=t[e],s=n[e],c=u.get(s);if(c)return void Ae(t,e,c);var f=o?o(a,s,e+"",t,n,u):it,l=f===it;if(l){var h=xh(s),p=!h&&Eh(s),v=!h&&!p&&Ch(s);f=s,h||p||v?xh(a)?f=a:Za(a)?f=Ui(a):p?(l=!1,f=Ci(s,!0)):v?(l=!1,f=Bi(s,!0)):f=[]:ys(s)||bh(s)?(f=a,bh(a)?f=Ts(a):(!ss(a)||r&&os(a))&&(f=Lo(s))):l=!1}l&&(u.set(s,f),i(f,s,r,o,u),u.delete(s)),Ae(t,e,f)}function Kr(t,n){var e=t.length;if(e)return n+=n<0?e:0,Po(n,e)?t[n]:it}function Yr(t,n,e){var r=-1;n=d(n.length?n:[Lc],B(Oo()));var i=$r(t,function(t,e,i){var o=d(n,function(n){return n(t)});return{criteria:o,index:++r,value:t}});return A(i,function(t,n){return Di(t,n,e)})}function Zr(t,n){return Jr(t,n,function(n,e){return Gs(t,e)})}function Jr(t,n,e){for(var r=-1,i=n.length,o={};++r<i;){var u=n[r],a=sr(t,u);e(a,u)&&si(o,Si(u,t),a)}return o}function Qr(t){return function(n){return sr(n,t)}}function ti(t,n,e,r){var i=r?O:k,o=-1,u=n.length,a=t;for(t===n&&(n=Ui(n)),e&&(a=d(t,B(e)));++o<u;)for(var s=0,c=n[o],f=e?e(c):c;(s=i(a,f,s,r))>-1;)a!==t&&Bf.call(a,s,1),Bf.call(t,s,1);return t}function ni(t,n){for(var e=t?n.length:0,r=e-1;e--;){var i=n[e];if(e==r||i!==o){var o=i;Po(i)?Bf.call(t,i,1):mi(t,i)}}return t}function ei(t,n){return t+$f(tl()*(n-t+1))}function ri(t,n,e,r){for(var i=-1,o=Yf(Gf((n-t)/(e||1)),0),u=af(o);o--;)u[r?o:++i]=t,t+=e;return u}function ii(t,n){var e="";if(!t||n<1||n>Bt)return e;do n%2&&(e+=t),n=$f(n/2),n&&(t+=t);while(n);return e}function oi(t,n){return Bl(Zo(t,n,Lc),t+"")}function ui(t){return Ce(rc(t))}function ai(t,n){var e=rc(t);return eu(e,ze(n,0,e.length))}function si(t,n,e,r){if(!ss(t))return t;n=Si(n,t);for(var i=-1,o=n.length,u=o-1,a=t;null!=a&&++i<o;){var s=ru(n[i]),c=e;if(i!=u){var f=a[s];c=r?r(f,s,a):it,c===it&&(c=ss(f)?f:Po(n[i+1])?[]:{})}Ne(a,s,c),a=a[s]}return t}function ci(t){return eu(rc(t))}function fi(t,n,e){var r=-1,i=t.length;n<0&&(n=-n>i?0:i+n),e=e>i?i:e,e<0&&(e+=i),i=n>e?0:e-n>>>0,n>>>=0;for(var o=af(i);++r<i;)o[r]=t[r+n];return o}function li(t,n){var e;return gl(t,function(t,r,i){return e=n(t,r,i),!e}),!!e}function hi(t,n,e){var r=0,i=null==t?r:t.length;if("number"==typeof n&&n===n&&i<=Ut){for(;r<i;){var o=r+i>>>1,u=t[o];null!==u&&!bs(u)&&(e?u<=n:u<n)?r=o+1:i=o}return i}return pi(t,n,Lc,e)}function pi(t,n,e,r){n=e(n);for(var i=0,o=null==t?0:t.length,u=n!==n,a=null===n,s=bs(n),c=n===it;i<o;){var f=$f((i+o)/2),l=e(t[f]),h=l!==it,p=null===l,v=l===l,d=bs(l);if(u)var _=r||v;else _=c?v&&(r||h):a?v&&h&&(r||!p):s?v&&h&&!p&&(r||!d):!p&&!d&&(r?l<=n:l<n);_?i=f+1:o=f}return Zf(o,zt)}function vi(t,n){for(var e=-1,r=t.length,i=0,o=[];++e<r;){var u=t[e],a=n?n(u):u;if(!e||!Ka(a,s)){var s=a;o[i++]=0===u?0:u}}return o}function di(t){return"number"==typeof t?t:bs(t)?Dt:+t}function _i(t){if("string"==typeof t)return t;if(xh(t))return d(t,_i)+"";if(bs(t))return yl?yl.call(t):"";var n=t+"";return"0"==n&&1/t==-Lt?"-0":n}function yi(t,n,e){var r=-1,i=p,o=t.length,u=!0,a=[],s=a;if(e)u=!1,i=v;else if(o>=ut){var c=n?null:Rl(t);if(c)return K(c);u=!1,i=D,s=new me}else s=n?[]:a;t:for(;++r<o;){var f=t[r],l=n?n(f):f;if(f=e||0!==f?f:0,u&&l===l){for(var h=s.length;h--;)if(s[h]===l)continue t;n&&s.push(l),a.push(f)}else i(s,l,e)||(s!==a&&s.push(l),a.push(f))}return a}function mi(t,n){return n=Si(n,t),t=Jo(t,n),null==t||delete t[ru(Ou(n))]}function gi(t,n,e,r){return si(t,n,e(sr(t,n)),r)}function bi(t,n,e,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&n(t[o],o,t););return e?fi(t,r?0:o,r?o+1:i):fi(t,r?o+1:0,r?i:o)}function xi(t,n){var e=t;return e instanceof b&&(e=e.value()),y(n,function(t,n){return n.func.apply(n.thisArg,_([t],n.args))},e)}function wi(t,n,e){var r=t.length;if(r<2)return r?yi(t[0]):[];for(var i=-1,o=af(r);++i<r;)for(var u=t[i],a=-1;++a<r;)a!=i&&(o[i]=qe(o[i]||u,t[a],n,e));return yi(nr(o,1),n,e)}function Ei(t,n,e){for(var r=-1,i=t.length,o=n.length,u={};++r<i;){var a=r<o?n[r]:it;e(u,t[r],a)}return u}function ki(t){return Za(t)?t:[]}function Oi(t){return"function"==typeof t?t:Lc}function Si(t,n){return xh(t)?t:Uo(t,n)?[t]:jl(As(t))}function Ri(t,n,e){var r=t.length;return e=e===it?r:e,!n&&e>=r?t:fi(t,n,e)}function Ci(t,n){if(n)return t.slice();var e=t.length,r=Af?Af(e):new t.constructor(e);return t.copy(r),r}function Ti(t){var n=new t.constructor(t.byteLength);return new If(n).set(new If(t)),n}function Ii(t,n){var e=n?Ti(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}function Ai(t,n,e){var r=n?e(q(t),ht):q(t);return y(r,o,new t.constructor)}function Ni(t){var n=new t.constructor(t.source,Xn.exec(t));return n.lastIndex=t.lastIndex,n}function Mi(t,n,e){var r=n?e(K(t),ht):K(t);return y(r,u,new t.constructor)}function Li(t){return _l?hf(_l.call(t)):{}}function Bi(t,n){var e=n?Ti(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}function ji(t,n){if(t!==n){var e=t!==it,r=null===t,i=t===t,o=bs(t),u=n!==it,a=null===n,s=n===n,c=bs(n);if(!a&&!c&&!o&&t>n||o&&u&&s&&!a&&!c||r&&u&&s||!e&&s||!i)return 1;if(!r&&!o&&!c&&t<n||c&&e&&i&&!r&&!o||a&&e&&i||!u&&i||!s)return-1}return 0}function Di(t,n,e){for(var r=-1,i=t.criteria,o=n.criteria,u=i.length,a=e.length;++r<u;){var s=ji(i[r],o[r]);if(s){if(r>=a)return s;var c=e[r];return s*("desc"==c?-1:1)}}return t.index-n.index}function Pi(t,n,e,r){for(var i=-1,o=t.length,u=e.length,a=-1,s=n.length,c=Yf(o-u,0),f=af(s+c),l=!r;++a<s;)f[a]=n[a];for(;++i<u;)(l||i<o)&&(f[e[i]]=t[i]);for(;c--;)f[a++]=t[i++];return f}function zi(t,n,e,r){for(var i=-1,o=t.length,u=-1,a=e.length,s=-1,c=n.length,f=Yf(o-a,0),l=af(f+c),h=!r;++i<f;)l[i]=t[i];for(var p=i;++s<c;)l[p+s]=n[s];for(;++u<a;)(h||i<o)&&(l[p+e[u]]=t[i++]);return l}function Ui(t,n){var e=-1,r=t.length;for(n||(n=af(r));++e<r;)n[e]=t[e];return n}function Wi(t,n,e,r){var i=!e;e||(e={});for(var o=-1,u=n.length;++o<u;){var a=n[o],s=r?r(e[a],t[a],a,e,t):it;s===it&&(s=t[a]),i?De(e,a,s):Ne(e,a,s)}return e}function Fi(t,n){return Wi(t,Tl(t),n)}function Gi(t,n){return Wi(t,Il(t),n)}function $i(t,n){return function(e,r){var i=xh(e)?s:Le,o=n?n():{};return i(e,t,Oo(r,2),o)}}function Vi(t){return oi(function(n,e){var r=-1,i=e.length,o=i>1?e[i-1]:it,u=i>2?e[2]:it;for(o=t.length>3&&"function"==typeof o?(i--,o):it,u&&zo(e[0],e[1],u)&&(o=i<3?it:o,i=1),n=hf(n);++r<i;){var a=e[r];a&&t(n,a,r,o)}return n})}function qi(t,n){return function(e,r){if(null==e)return e;if(!Ya(e))return t(e,r);for(var i=e.length,o=n?i:-1,u=hf(e);(n?o--:++o<i)&&r(u[o],o,u)!==!1;);return e}}function Xi(t){return function(n,e,r){for(var i=-1,o=hf(n),u=r(n),a=u.length;a--;){var s=u[t?a:++i];if(e(o[s],s,o)===!1)break}return n}}function Hi(t,n,e){function r(){var n=this&&this!==ar&&this instanceof r?o:t;return n.apply(i?e:this,arguments)}var i=n&yt,o=Zi(t);return r}function Ki(t){return function(n){n=As(n);var e=G(n)?tt(n):it,r=e?e[0]:n.charAt(0),i=e?Ri(e,1).join(""):n.slice(1);return r[t]()+i}}function Yi(t){return function(n){return y(Tc(cc(n).replace(Ge,"")),t,"")}}function Zi(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var e=ml(t.prototype),r=t.apply(e,n);return ss(r)?r:e}}function Ji(t,n,e){function r(){for(var o=arguments.length,u=af(o),s=o,c=ko(r);s--;)u[s]=arguments[s];var f=o<3&&u[0]!==c&&u[o-1]!==c?[]:H(u,c);if(o-=f.length,o<e)return co(t,n,no,r.placeholder,it,u,f,it,it,e-o);var l=this&&this!==ar&&this instanceof r?i:t;return a(l,this,u)}var i=Zi(t);return r}function Qi(t){return function(n,e,r){var i=hf(n);if(!Ya(n)){var o=Oo(e,3);n=$s(n),e=function(t){return o(i[t],t,i)}}var u=t(n,e,r);return u>-1?i[o?n[u]:u]:it}}function to(t){return bo(function(n){var e=n.length,r=e,o=i.prototype.thru;for(t&&n.reverse();r--;){var u=n[r];if("function"!=typeof u)throw new df(st);if(o&&!a&&"wrapper"==Eo(u))var a=new i([],!0)}for(r=a?r:e;++r<e;){u=n[r];var s=Eo(u),c="wrapper"==s?Cl(u):it;a=c&&Fo(c[0])&&c[1]==(kt|bt|wt|Ot)&&!c[4].length&&1==c[9]?a[Eo(c[0])].apply(a,c[3]):1==u.length&&Fo(u)?a[s]():a.thru(u)}return function(){var t=arguments,r=t[0];if(a&&1==t.length&&xh(r))return a.plant(r).value();for(var i=0,o=e?n[i].apply(this,t):r;++i<e;)o=n[i].call(this,o);return o}})}function no(t,n,e,r,i,o,u,a,s,c){function f(){for(var y=arguments.length,m=af(y),g=y;g--;)m[g]=arguments[g];if(v)var b=ko(f),x=U(m,b);if(r&&(m=Pi(m,r,i,v)),o&&(m=zi(m,o,u,v)),y-=x,v&&y<c){var w=H(m,b);return co(t,n,no,f.placeholder,e,m,w,a,s,c-y)}var E=h?e:this,k=p?E[t]:t;return y=m.length,a?m=Qo(m,a):d&&y>1&&m.reverse(),l&&s<y&&(m.length=s),this&&this!==ar&&this instanceof f&&(k=_||Zi(k)),k.apply(E,m)}var l=n&kt,h=n&yt,p=n&mt,v=n&(bt|xt),d=n&St,_=p?it:Zi(t);return f}function eo(t,n){return function(e,r){return Rr(e,t,n(r),{})}}function ro(t,n){return function(e,r){var i;if(e===it&&r===it)return n;if(e!==it&&(i=e),r!==it){if(i===it)return r;"string"==typeof e||"string"==typeof r?(e=_i(e),r=_i(r)):(e=di(e),r=di(r)),i=t(e,r)}return i}}function io(t){return bo(function(n){return n=d(n,B(Oo())),oi(function(e){var r=this;return t(n,function(t){return a(t,r,e)})})})}function oo(t,n){n=n===it?" ":_i(n);var e=n.length;if(e<2)return e?ii(n,t):n;var r=ii(n,Gf(t/Q(n)));return G(n)?Ri(tt(r),0,t).join(""):r.slice(0,t)}function uo(t,n,e,r){function i(){for(var n=-1,s=arguments.length,c=-1,f=r.length,l=af(f+s),h=this&&this!==ar&&this instanceof i?u:t;++c<f;)l[c]=r[c];for(;s--;)l[c++]=arguments[++n];return a(h,o?e:this,l)}var o=n&yt,u=Zi(t);return i}function ao(t){return function(n,e,r){return r&&"number"!=typeof r&&zo(n,e,r)&&(e=r=it),n=Os(n),e===it?(e=n,n=0):e=Os(e),r=r===it?n<e?1:-1:Os(r),ri(n,e,r,t)}}function so(t){return function(n,e){return"string"==typeof n&&"string"==typeof e||(n=Cs(n),e=Cs(e)),t(n,e)}}function co(t,n,e,r,i,o,u,a,s,c){var f=n&bt,l=f?u:it,h=f?it:u,p=f?o:it,v=f?it:o;n|=f?wt:Et,n&=~(f?Et:wt),n&gt||(n&=~(yt|mt));var d=[t,n,i,p,l,v,h,a,s,c],_=e.apply(it,d);return Fo(t)&&Ml(_,d),_.placeholder=r,tu(_,t,n)}function fo(t){var n=lf[t];return function(t,e){if(t=Cs(t),e=null==e?0:Zf(Ss(e),292)){var r=(As(t)+"e").split("e"),i=n(r[0]+"e"+(+r[1]+e));return r=(As(i)+"e").split("e"),+(r[0]+"e"+(+r[1]-e))}return n(t)}}function lo(t){return function(n){var e=Al(n);return e==Zt?q(n):e==on?Y(n):L(n,t(n))}}function ho(t,n,e,r,i,o,u,a){var s=n&mt;if(!s&&"function"!=typeof t)throw new df(st);var c=r?r.length:0;if(c||(n&=~(wt|Et),r=i=it),u=u===it?u:Yf(Ss(u),0),a=a===it?a:Ss(a),c-=i?i.length:0,n&Et){var f=r,l=i;r=i=it}var h=s?it:Cl(t),p=[t,n,e,r,i,f,l,o,u,a];if(h&&Ho(p,h),t=p[0],n=p[1],e=p[2],r=p[3],i=p[4],a=p[9]=p[9]===it?s?0:t.length:Yf(p[9]-c,0),!a&&n&(bt|xt)&&(n&=~(bt|xt)),n&&n!=yt)v=n==bt||n==xt?Ji(t,n,a):n!=wt&&n!=(yt|wt)||i.length?no.apply(it,p):uo(t,n,e,r);else var v=Hi(t,n,e);var d=h?El:Ml;return tu(d(v,p),t,n)}function po(t,n,e,r){return t===it||Ka(t,mf[e])&&!xf.call(r,e)?n:t}function vo(t,n,e,r,i,o){return ss(t)&&ss(n)&&(o.set(n,t),Xr(t,n,it,vo,o),o.delete(n)),t}function _o(t){return ys(t)?it:t}function yo(t,n,e,r,i,o){var u=e&dt,a=t.length,s=n.length;if(a!=s&&!(u&&s>a))return!1;var c=o.get(t);if(c&&o.get(n))return c==n;var f=-1,l=!0,h=e&_t?new me:it;for(o.set(t,n),o.set(n,t);++f<a;){var p=t[f],v=n[f];if(r)var d=u?r(v,p,f,n,t,o):r(p,v,f,t,n,o);if(d!==it){if(d)continue;l=!1;break}if(h){if(!g(n,function(t,n){if(!D(h,n)&&(p===t||i(p,t,e,r,o)))return h.push(n)})){l=!1;break}}else if(p!==v&&!i(p,v,e,r,o)){l=!1;break}}return o.delete(t),o.delete(n),l}function mo(t,n,e,r,i,o,u){switch(e){case hn:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case ln:return!(t.byteLength!=n.byteLength||!o(new If(t),new If(n)));case Vt:case qt:case Jt:return Ka(+t,+n);case Ht:return t.name==n.name&&t.message==n.message;
case rn:case un:return t==n+"";case Zt:var a=q;case on:var s=r&dt;if(a||(a=K),t.size!=n.size&&!s)return!1;var c=u.get(t);if(c)return c==n;r|=_t,u.set(t,n);var f=yo(a(t),a(n),r,i,o,u);return u.delete(t),f;case an:if(_l)return _l.call(t)==_l.call(n)}return!1}function go(t,n,e,r,i,o){var u=e&dt,a=xo(t),s=a.length,c=xo(n),f=c.length;if(s!=f&&!u)return!1;for(var l=s;l--;){var h=a[l];if(!(u?h in n:xf.call(n,h)))return!1}var p=o.get(t);if(p&&o.get(n))return p==n;var v=!0;o.set(t,n),o.set(n,t);for(var d=u;++l<s;){h=a[l];var _=t[h],y=n[h];if(r)var m=u?r(y,_,h,n,t,o):r(_,y,h,t,n,o);if(!(m===it?_===y||i(_,y,e,r,o):m)){v=!1;break}d||(d="constructor"==h)}if(v&&!d){var g=t.constructor,b=n.constructor;g!=b&&"constructor"in t&&"constructor"in n&&!("function"==typeof g&&g instanceof g&&"function"==typeof b&&b instanceof b)&&(v=!1)}return o.delete(t),o.delete(n),v}function bo(t){return Bl(Zo(t,it,yu),t+"")}function xo(t){return cr(t,$s,Tl)}function wo(t){return cr(t,Vs,Il)}function Eo(t){for(var n=t.name+"",e=cl[n],r=xf.call(cl,n)?e.length:0;r--;){var i=e[r],o=i.func;if(null==o||o==t)return i.name}return n}function ko(t){var n=xf.call(e,"placeholder")?e:t;return n.placeholder}function Oo(){var t=e.iteratee||Bc;return t=t===Bc?Ur:t,arguments.length?t(arguments[0],arguments[1]):t}function So(t,n){var e=t.__data__;return Wo(n)?e["string"==typeof n?"string":"hash"]:e.map}function Ro(t){for(var n=$s(t),e=n.length;e--;){var r=n[e],i=t[r];n[e]=[r,i,Vo(i)]}return n}function Co(t,n){var e=F(t,n);return jr(e)?e:it}function To(t){var n=xf.call(t,Pf),e=t[Pf];try{t[Pf]=it;var r=!0}catch(t){}var i=kf.call(t);return r&&(n?t[Pf]=e:delete t[Pf]),i}function Io(t,n,e){for(var r=-1,i=e.length;++r<i;){var o=e[r],u=o.size;switch(o.type){case"drop":t+=u;break;case"dropRight":n-=u;break;case"take":n=Zf(n,t+u);break;case"takeRight":t=Yf(t,n-u)}}return{start:t,end:n}}function Ao(t){var n=t.match(Fn);return n?n[1].split(Gn):[]}function No(t,n,e){n=Si(n,t);for(var r=-1,i=n.length,o=!1;++r<i;){var u=ru(n[r]);if(!(o=null!=t&&e(t,u)))break;t=t[u]}return o||++r!=i?o:(i=null==t?0:t.length,!!i&&as(i)&&Po(u,i)&&(xh(t)||bh(t)))}function Mo(t){var n=t.length,e=t.constructor(n);return n&&"string"==typeof t[0]&&xf.call(t,"index")&&(e.index=t.index,e.input=t.input),e}function Lo(t){return"function"!=typeof t.constructor||$o(t)?{}:ml(Nf(t))}function Bo(t,n,e,r){var i=t.constructor;switch(n){case ln:return Ti(t);case Vt:case qt:return new i(+t);case hn:return Ii(t,r);case pn:case vn:case dn:case _n:case yn:case mn:case gn:case bn:case xn:return Bi(t,r);case Zt:return Ai(t,r,e);case Jt:case un:return new i(t);case rn:return Ni(t);case on:return Mi(t,r,e);case an:return Li(t)}}function jo(t,n){var e=n.length;if(!e)return t;var r=e-1;return n[r]=(e>1?"& ":"")+n[r],n=n.join(e>2?", ":" "),t.replace(Wn,"{\n/* [wrapped with "+n+"] */\n")}function Do(t){return xh(t)||bh(t)||!!(jf&&t&&t[jf])}function Po(t,n){return n=null==n?Bt:n,!!n&&("number"==typeof t||Jn.test(t))&&t>-1&&t%1==0&&t<n}function zo(t,n,e){if(!ss(e))return!1;var r=typeof n;return!!("number"==r?Ya(e)&&Po(n,e.length):"string"==r&&n in e)&&Ka(e[n],t)}function Uo(t,n){if(xh(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!bs(t))||(Mn.test(t)||!Nn.test(t)||null!=n&&t in hf(n))}function Wo(t){var n=typeof t;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t}function Fo(t){var n=Eo(t),r=e[n];if("function"!=typeof r||!(n in b.prototype))return!1;if(t===r)return!0;var i=Cl(r);return!!i&&t===i[0]}function Go(t){return!!Ef&&Ef in t}function $o(t){var n=t&&t.constructor,e="function"==typeof n&&n.prototype||mf;return t===e}function Vo(t){return t===t&&!ss(t)}function qo(t,n){return function(e){return null!=e&&(e[t]===n&&(n!==it||t in hf(e)))}}function Xo(t){var n=Ba(t,function(t){return e.size===ft&&e.clear(),t}),e=n.cache;return n}function Ho(t,n){var e=t[1],r=n[1],i=e|r,o=i<(yt|mt|kt),u=r==kt&&e==bt||r==kt&&e==Ot&&t[7].length<=n[8]||r==(kt|Ot)&&n[7].length<=n[8]&&e==bt;if(!o&&!u)return t;r&yt&&(t[2]=n[2],i|=e&yt?0:gt);var a=n[3];if(a){var s=t[3];t[3]=s?Pi(s,a,n[4]):a,t[4]=s?H(t[3],lt):n[4]}return a=n[5],a&&(s=t[5],t[5]=s?zi(s,a,n[6]):a,t[6]=s?H(t[5],lt):n[6]),a=n[7],a&&(t[7]=a),r&kt&&(t[8]=null==t[8]?n[8]:Zf(t[8],n[8])),null==t[9]&&(t[9]=n[9]),t[0]=n[0],t[1]=i,t}function Ko(t){var n=[];if(null!=t)for(var e in hf(t))n.push(e);return n}function Yo(t){return kf.call(t)}function Zo(t,n,e){return n=Yf(n===it?t.length-1:n,0),function(){for(var r=arguments,i=-1,o=Yf(r.length-n,0),u=af(o);++i<o;)u[i]=r[n+i];i=-1;for(var s=af(n+1);++i<n;)s[i]=r[i];return s[n]=e(u),a(t,this,s)}}function Jo(t,n){return n.length<2?t:sr(t,fi(n,0,-1))}function Qo(t,n){for(var e=t.length,r=Zf(n.length,e),i=Ui(t);r--;){var o=n[r];t[r]=Po(o,e)?i[o]:it}return t}function tu(t,n,e){var r=n+"";return Bl(t,jo(r,ou(Ao(r),e)))}function nu(t){var n=0,e=0;return function(){var r=Jf(),i=It-(r-e);if(e=r,i>0){if(++n>=Tt)return arguments[0]}else n=0;return t.apply(it,arguments)}}function eu(t,n){var e=-1,r=t.length,i=r-1;for(n=n===it?r:n;++e<n;){var o=ei(e,i),u=t[o];t[o]=t[e],t[e]=u}return t.length=n,t}function ru(t){if("string"==typeof t||bs(t))return t;var n=t+"";return"0"==n&&1/t==-Lt?"-0":n}function iu(t){if(null!=t){try{return bf.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function ou(t,n){return c(Wt,function(e){var r="_."+e[0];n&e[1]&&!p(t,r)&&t.push(r)}),t.sort()}function uu(t){if(t instanceof b)return t.clone();var n=new i(t.__wrapped__,t.__chain__);return n.__actions__=Ui(t.__actions__),n.__index__=t.__index__,n.__values__=t.__values__,n}function au(t,n,e){n=(e?zo(t,n,e):n===it)?1:Yf(Ss(n),0);var r=null==t?0:t.length;if(!r||n<1)return[];for(var i=0,o=0,u=af(Gf(r/n));i<r;)u[o++]=fi(t,i,i+=n);return u}function su(t){for(var n=-1,e=null==t?0:t.length,r=0,i=[];++n<e;){var o=t[n];o&&(i[r++]=o)}return i}function cu(){var t=arguments.length;if(!t)return[];for(var n=af(t-1),e=arguments[0],r=t;r--;)n[r-1]=arguments[r];return _(xh(e)?Ui(e):[e],nr(n,1))}function fu(t,n,e){var r=null==t?0:t.length;return r?(n=e||n===it?1:Ss(n),fi(t,n<0?0:n,r)):[]}function lu(t,n,e){var r=null==t?0:t.length;return r?(n=e||n===it?1:Ss(n),n=r-n,fi(t,0,n<0?0:n)):[]}function hu(t,n){return t&&t.length?bi(t,Oo(n,3),!0,!0):[]}function pu(t,n){return t&&t.length?bi(t,Oo(n,3),!0):[]}function vu(t,n,e,r){var i=null==t?0:t.length;return i?(e&&"number"!=typeof e&&zo(t,n,e)&&(e=0,r=i),Qe(t,n,e,r)):[]}function du(t,n,e){var r=null==t?0:t.length;if(!r)return-1;var i=null==e?0:Ss(e);return i<0&&(i=Yf(r+i,0)),E(t,Oo(n,3),i)}function _u(t,n,e){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return e!==it&&(i=Ss(e),i=e<0?Yf(r+i,0):Zf(i,r-1)),E(t,Oo(n,3),i,!0)}function yu(t){var n=null==t?0:t.length;return n?nr(t,1):[]}function mu(t){var n=null==t?0:t.length;return n?nr(t,Lt):[]}function gu(t,n){var e=null==t?0:t.length;return e?(n=n===it?1:Ss(n),nr(t,n)):[]}function bu(t){for(var n=-1,e=null==t?0:t.length,r={};++n<e;){var i=t[n];r[i[0]]=i[1]}return r}function xu(t){return t&&t.length?t[0]:it}function wu(t,n,e){var r=null==t?0:t.length;if(!r)return-1;var i=null==e?0:Ss(e);return i<0&&(i=Yf(r+i,0)),k(t,n,i)}function Eu(t){var n=null==t?0:t.length;return n?fi(t,0,-1):[]}function ku(t,n){return null==t?"":Hf.call(t,n)}function Ou(t){var n=null==t?0:t.length;return n?t[n-1]:it}function Su(t,n,e){var r=null==t?0:t.length;if(!r)return-1;var i=r;return e!==it&&(i=Ss(e),i=i<0?Yf(r+i,0):Zf(i,r-1)),n===n?J(t,n,i):E(t,S,i,!0)}function Ru(t,n){return t&&t.length?Kr(t,Ss(n)):it}function Cu(t,n){return t&&t.length&&n&&n.length?ti(t,n):t}function Tu(t,n,e){return t&&t.length&&n&&n.length?ti(t,n,Oo(e,2)):t}function Iu(t,n,e){return t&&t.length&&n&&n.length?ti(t,n,it,e):t}function Au(t,n){var e=[];if(!t||!t.length)return e;var r=-1,i=[],o=t.length;for(n=Oo(n,3);++r<o;){var u=t[r];n(u,r,t)&&(e.push(u),i.push(r))}return ni(t,i),e}function Nu(t){return null==t?t:nl.call(t)}function Mu(t,n,e){var r=null==t?0:t.length;return r?(e&&"number"!=typeof e&&zo(t,n,e)?(n=0,e=r):(n=null==n?0:Ss(n),e=e===it?r:Ss(e)),fi(t,n,e)):[]}function Lu(t,n){return hi(t,n)}function Bu(t,n,e){return pi(t,n,Oo(e,2))}function ju(t,n){var e=null==t?0:t.length;if(e){var r=hi(t,n);if(r<e&&Ka(t[r],n))return r}return-1}function Du(t,n){return hi(t,n,!0)}function Pu(t,n,e){return pi(t,n,Oo(e,2),!0)}function zu(t,n){var e=null==t?0:t.length;if(e){var r=hi(t,n,!0)-1;if(Ka(t[r],n))return r}return-1}function Uu(t){return t&&t.length?vi(t):[]}function Wu(t,n){return t&&t.length?vi(t,Oo(n,2)):[]}function Fu(t){var n=null==t?0:t.length;return n?fi(t,1,n):[]}function Gu(t,n,e){return t&&t.length?(n=e||n===it?1:Ss(n),fi(t,0,n<0?0:n)):[]}function $u(t,n,e){var r=null==t?0:t.length;return r?(n=e||n===it?1:Ss(n),n=r-n,fi(t,n<0?0:n,r)):[]}function Vu(t,n){return t&&t.length?bi(t,Oo(n,3),!1,!0):[]}function qu(t,n){return t&&t.length?bi(t,Oo(n,3)):[]}function Xu(t){return t&&t.length?yi(t):[]}function Hu(t,n){return t&&t.length?yi(t,Oo(n,2)):[]}function Ku(t,n){return n="function"==typeof n?n:it,t&&t.length?yi(t,it,n):[]}function Yu(t){if(!t||!t.length)return[];var n=0;return t=h(t,function(t){if(Za(t))return n=Yf(t.length,n),!0}),M(n,function(n){return d(t,C(n))})}function Zu(t,n){if(!t||!t.length)return[];var e=Yu(t);return null==n?e:d(e,function(t){return a(n,it,t)})}function Ju(t,n){return Ei(t||[],n||[],Ne)}function Qu(t,n){return Ei(t||[],n||[],si)}function ta(t){var n=e(t);return n.__chain__=!0,n}function na(t,n){return n(t),t}function ea(t,n){return n(t)}function ra(){return ta(this)}function ia(){return new i(this.value(),this.__chain__)}function oa(){this.__values__===it&&(this.__values__=ks(this.value()));var t=this.__index__>=this.__values__.length,n=t?it:this.__values__[this.__index__++];return{done:t,value:n}}function ua(){return this}function aa(t){for(var n,e=this;e instanceof r;){var i=uu(e);i.__index__=0,i.__values__=it,n?o.__wrapped__=i:n=i;var o=i;e=e.__wrapped__}return o.__wrapped__=t,n}function sa(){var t=this.__wrapped__;if(t instanceof b){var n=t;return this.__actions__.length&&(n=new b(this)),n=n.reverse(),n.__actions__.push({func:ea,args:[Nu],thisArg:it}),new i(n,this.__chain__)}return this.thru(Nu)}function ca(){return xi(this.__wrapped__,this.__actions__)}function fa(t,n,e){var r=xh(t)?l:Xe;return e&&zo(t,n,e)&&(n=it),r(t,Oo(n,3))}function la(t,n){var e=xh(t)?h:tr;return e(t,Oo(n,3))}function ha(t,n){return nr(ma(t,n),1)}function pa(t,n){return nr(ma(t,n),Lt)}function va(t,n,e){return e=e===it?1:Ss(e),nr(ma(t,n),e)}function da(t,n){var e=xh(t)?c:gl;return e(t,Oo(n,3))}function _a(t,n){var e=xh(t)?f:bl;return e(t,Oo(n,3))}function ya(t,n,e,r){t=Ya(t)?t:rc(t),e=e&&!r?Ss(e):0;var i=t.length;return e<0&&(e=Yf(i+e,0)),gs(t)?e<=i&&t.indexOf(n,e)>-1:!!i&&k(t,n,e)>-1}function ma(t,n){var e=xh(t)?d:$r;return e(t,Oo(n,3))}function ga(t,n,e,r){return null==t?[]:(xh(n)||(n=null==n?[]:[n]),e=r?it:e,xh(e)||(e=null==e?[]:[e]),Yr(t,n,e))}function ba(t,n,e){var r=xh(t)?y:I,i=arguments.length<3;return r(t,Oo(n,4),e,i,gl)}function xa(t,n,e){var r=xh(t)?m:I,i=arguments.length<3;return r(t,Oo(n,4),e,i,bl)}function wa(t,n){var e=xh(t)?h:tr;return e(t,ja(Oo(n,3)))}function Ea(t){var n=xh(t)?Ce:ui;return n(t)}function ka(t,n,e){n=(e?zo(t,n,e):n===it)?1:Ss(n);var r=xh(t)?Te:ai;return r(t,n)}function Oa(t){var n=xh(t)?Ie:ci;return n(t)}function Sa(t){if(null==t)return 0;if(Ya(t))return gs(t)?Q(t):t.length;var n=Al(t);return n==Zt||n==on?t.size:Wr(t).length}function Ra(t,n,e){var r=xh(t)?g:li;return e&&zo(t,n,e)&&(n=it),r(t,Oo(n,3))}function Ca(t,n){if("function"!=typeof n)throw new df(st);return t=Ss(t),function(){if(--t<1)return n.apply(this,arguments)}}function Ta(t,n,e){return n=e?it:n,n=t&&null==n?t.length:n,ho(t,kt,it,it,it,it,n)}function Ia(t,n){var e;if("function"!=typeof n)throw new df(st);return t=Ss(t),function(){return--t>0&&(e=n.apply(this,arguments)),t<=1&&(n=it),e}}function Aa(t,n,e){n=e?it:n;var r=ho(t,bt,it,it,it,it,it,n);return r.placeholder=Aa.placeholder,r}function Na(t,n,e){n=e?it:n;var r=ho(t,xt,it,it,it,it,it,n);return r.placeholder=Na.placeholder,r}function Ma(t,n,e){function r(n){var e=h,r=p;return h=p=it,m=n,d=t.apply(r,e)}function i(t){return m=t,_=Ll(a,n),g?r(t):d}function o(t){var e=t-y,r=t-m,i=n-e;return b?Zf(i,v-r):i}function u(t){var e=t-y,r=t-m;return y===it||e>=n||e<0||b&&r>=v}function a(){var t=ch();return u(t)?s(t):void(_=Ll(a,o(t)))}function s(t){return _=it,x&&h?r(t):(h=p=it,d)}function c(){_!==it&&Sl(_),m=0,h=y=p=_=it}function f(){return _===it?d:s(ch())}function l(){var t=ch(),e=u(t);if(h=arguments,p=this,y=t,e){if(_===it)return i(y);if(b)return _=Ll(a,n),r(y)}return _===it&&(_=Ll(a,n)),d}var h,p,v,d,_,y,m=0,g=!1,b=!1,x=!0;if("function"!=typeof t)throw new df(st);return n=Cs(n)||0,ss(e)&&(g=!!e.leading,b="maxWait"in e,v=b?Yf(Cs(e.maxWait)||0,n):v,x="trailing"in e?!!e.trailing:x),l.cancel=c,l.flush=f,l}function La(t){return ho(t,St)}function Ba(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new df(st);var e=function(){var r=arguments,i=n?n.apply(this,r):r[0],o=e.cache;if(o.has(i))return o.get(i);var u=t.apply(this,r);return e.cache=o.set(i,u)||o,u};return e.cache=new(Ba.Cache||he),e}function ja(t){if("function"!=typeof t)throw new df(st);return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}function Da(t){return Ia(2,t)}function Pa(t,n){if("function"!=typeof t)throw new df(st);return n=n===it?n:Ss(n),oi(t,n)}function za(t,n){if("function"!=typeof t)throw new df(st);return n=null==n?0:Yf(Ss(n),0),oi(function(e){var r=e[n],i=Ri(e,0,n);return r&&_(i,r),a(t,this,i)})}function Ua(t,n,e){var r=!0,i=!0;if("function"!=typeof t)throw new df(st);return ss(e)&&(r="leading"in e?!!e.leading:r,i="trailing"in e?!!e.trailing:i),Ma(t,n,{leading:r,maxWait:n,trailing:i})}function Wa(t){return Ta(t,1)}function Fa(t,n){return dh(Oi(n),t)}function Ga(){if(!arguments.length)return[];var t=arguments[0];return xh(t)?t:[t]}function $a(t){return Ue(t,vt)}function Va(t,n){return n="function"==typeof n?n:it,Ue(t,vt,n)}function qa(t){return Ue(t,ht|vt)}function Xa(t,n){return n="function"==typeof n?n:it,Ue(t,ht|vt,n)}function Ha(t,n){return null==n||Fe(t,n,$s(n))}function Ka(t,n){return t===n||t!==t&&n!==n}function Ya(t){return null!=t&&as(t.length)&&!os(t)}function Za(t){return cs(t)&&Ya(t)}function Ja(t){return t===!0||t===!1||cs(t)&&lr(t)==Vt}function Qa(t){return cs(t)&&1===t.nodeType&&!ys(t)}function ts(t){if(null==t)return!0;if(Ya(t)&&(xh(t)||"string"==typeof t||"function"==typeof t.splice||Eh(t)||Ch(t)||bh(t)))return!t.length;var n=Al(t);if(n==Zt||n==on)return!t.size;if($o(t))return!Wr(t).length;for(var e in t)if(xf.call(t,e))return!1;return!0}function ns(t,n){return Nr(t,n)}function es(t,n,e){e="function"==typeof e?e:it;var r=e?e(t,n):it;return r===it?Nr(t,n,it,e):!!r}function rs(t){if(!cs(t))return!1;var n=lr(t);return n==Ht||n==Xt||"string"==typeof t.message&&"string"==typeof t.name&&!ys(t)}function is(t){return"number"==typeof t&&Xf(t)}function os(t){if(!ss(t))return!1;var n=lr(t);return n==Kt||n==Yt||n==$t||n==en}function us(t){return"number"==typeof t&&t==Ss(t)}function as(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Bt}function ss(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)}function cs(t){return null!=t&&"object"==typeof t}function fs(t,n){return t===n||Br(t,n,Ro(n))}function ls(t,n,e){return e="function"==typeof e?e:it,Br(t,n,Ro(n),e)}function hs(t){return _s(t)&&t!=+t}function ps(t){if(Nl(t))throw new cf(at);return jr(t)}function vs(t){return null===t}function ds(t){return null==t}function _s(t){return"number"==typeof t||cs(t)&&lr(t)==Jt}function ys(t){if(!cs(t)||lr(t)!=tn)return!1;var n=Nf(t);if(null===n)return!0;var e=xf.call(n,"constructor")&&n.constructor;return"function"==typeof e&&e instanceof e&&bf.call(e)==Of}function ms(t){return us(t)&&t>=-Bt&&t<=Bt}function gs(t){return"string"==typeof t||!xh(t)&&cs(t)&&lr(t)==un}function bs(t){return"symbol"==typeof t||cs(t)&&lr(t)==an}function xs(t){return t===it}function ws(t){return cs(t)&&Al(t)==cn}function Es(t){return cs(t)&&lr(t)==fn}function ks(t){if(!t)return[];if(Ya(t))return gs(t)?tt(t):Ui(t);if(Df&&t[Df])return V(t[Df]());var n=Al(t),e=n==Zt?q:n==on?K:rc;return e(t)}function Os(t){if(!t)return 0===t?t:0;if(t=Cs(t),t===Lt||t===-Lt){var n=t<0?-1:1;return n*jt}return t===t?t:0}function Ss(t){var n=Os(t),e=n%1;return n===n?e?n-e:n:0}function Rs(t){return t?ze(Ss(t),0,Pt):0}function Cs(t){if("number"==typeof t)return t;if(bs(t))return Dt;if(ss(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=ss(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Pn,"");var e=Kn.test(t);return e||Zn.test(t)?ir(t.slice(2),e?2:8):Hn.test(t)?Dt:+t}function Ts(t){return Wi(t,Vs(t))}function Is(t){return t?ze(Ss(t),-Bt,Bt):0===t?t:0}function As(t){return null==t?"":_i(t)}function Ns(t,n){var e=ml(t);return null==n?e:Be(e,n)}function Ms(t,n){return w(t,Oo(n,3),er)}function Ls(t,n){return w(t,Oo(n,3),or)}function Bs(t,n){return null==t?t:xl(t,Oo(n,3),Vs)}function js(t,n){return null==t?t:wl(t,Oo(n,3),Vs)}function Ds(t,n){return t&&er(t,Oo(n,3))}function Ps(t,n){return t&&or(t,Oo(n,3))}function zs(t){return null==t?[]:ur(t,$s(t))}function Us(t){return null==t?[]:ur(t,Vs(t))}function Ws(t,n,e){var r=null==t?it:sr(t,n);return r===it?e:r}function Fs(t,n){return null!=t&&No(t,n,gr)}function Gs(t,n){return null!=t&&No(t,n,Er)}function $s(t){return Ya(t)?Re(t):Wr(t)}function Vs(t){return Ya(t)?Re(t,!0):Fr(t)}function qs(t,n){var e={};return n=Oo(n,3),er(t,function(t,r,i){De(e,n(t,r,i),t)}),e}function Xs(t,n){var e={};return n=Oo(n,3),er(t,function(t,r,i){De(e,r,n(t,r,i))}),e}function Hs(t,n){return Ks(t,ja(Oo(n)))}function Ks(t,n){if(null==t)return{};var e=d(wo(t),function(t){return[t]});return n=Oo(n),Jr(t,e,function(t,e){return n(t,e[0])})}function Ys(t,n,e){n=Si(n,t);var r=-1,i=n.length;for(i||(i=1,t=it);++r<i;){var o=null==t?it:t[ru(n[r])];o===it&&(r=i,o=e),t=os(o)?o.call(t):o}return t}function Zs(t,n,e){return null==t?t:si(t,n,e)}function Js(t,n,e,r){return r="function"==typeof r?r:it,null==t?t:si(t,n,e,r)}function Qs(t,n,e){var r=xh(t),i=r||Eh(t)||Ch(t);if(n=Oo(n,4),null==e){var o=t&&t.constructor;e=i?r?new o:[]:ss(t)&&os(o)?ml(Nf(t)):{}}return(i?c:er)(t,function(t,r,i){return n(e,t,r,i)}),e}function tc(t,n){return null==t||mi(t,n)}function nc(t,n,e){return null==t?t:gi(t,n,Oi(e))}function ec(t,n,e,r){return r="function"==typeof r?r:it,null==t?t:gi(t,n,Oi(e),r)}function rc(t){return null==t?[]:j(t,$s(t))}function ic(t){return null==t?[]:j(t,Vs(t))}function oc(t,n,e){return e===it&&(e=n,n=it),e!==it&&(e=Cs(e),e=e===e?e:0),n!==it&&(n=Cs(n),n=n===n?n:0),ze(Cs(t),n,e)}function uc(t,n,e){return n=Os(n),e===it?(e=n,n=0):e=Os(e),t=Cs(t),Or(t,n,e)}function ac(t,n,e){if(e&&"boolean"!=typeof e&&zo(t,n,e)&&(n=e=it),e===it&&("boolean"==typeof n?(e=n,n=it):"boolean"==typeof t&&(e=t,t=it)),t===it&&n===it?(t=0,n=1):(t=Os(t),n===it?(n=t,t=0):n=Os(n)),t>n){var r=t;t=n,n=r}if(e||t%1||n%1){var i=tl();return Zf(t+i*(n-t+rr("1e-"+((i+"").length-1))),n)}return ei(t,n)}function sc(t){return tp(As(t).toLowerCase())}function cc(t){return t=As(t),t&&t.replace(Qn,br).replace($e,"")}function fc(t,n,e){t=As(t),n=_i(n);var r=t.length;e=e===it?r:ze(Ss(e),0,r);var i=e;return e-=n.length,e>=0&&t.slice(e,i)==n}function lc(t){return t=As(t),t&&Cn.test(t)?t.replace(Sn,xr):t}function hc(t){return t=As(t),t&&Dn.test(t)?t.replace(jn,"\\$&"):t}function pc(t,n,e){t=As(t),n=Ss(n);var r=n?Q(t):0;if(!n||r>=n)return t;var i=(n-r)/2;return oo($f(i),e)+t+oo(Gf(i),e)}function vc(t,n,e){t=As(t),n=Ss(n);var r=n?Q(t):0;return n&&r<n?t+oo(n-r,e):t}function dc(t,n,e){t=As(t),n=Ss(n);var r=n?Q(t):0;return n&&r<n?oo(n-r,e)+t:t}function _c(t,n,e){return e||null==n?n=0:n&&(n=+n),Qf(As(t).replace(zn,""),n||0)}function yc(t,n,e){return n=(e?zo(t,n,e):n===it)?1:Ss(n),ii(As(t),n)}function mc(){var t=arguments,n=As(t[0]);return t.length<3?n:n.replace(t[1],t[2])}function gc(t,n,e){return e&&"number"!=typeof e&&zo(t,n,e)&&(n=e=it),(e=e===it?Pt:e>>>0)?(t=As(t),t&&("string"==typeof n||null!=n&&!Sh(n))&&(n=_i(n),!n&&G(t))?Ri(tt(t),0,e):t.split(n,e)):[]}function bc(t,n,e){return t=As(t),e=null==e?0:ze(Ss(e),0,t.length),n=_i(n),t.slice(e,e+n.length)==n}function xc(t,n,r){var i=e.templateSettings;r&&zo(t,n,r)&&(n=it),t=As(t),n=Mh({},n,i,po);var o,u,a=Mh({},n.imports,i.imports,po),s=$s(a),c=j(a,s),f=0,l=n.interpolate||te,h="__p += '",p=pf((n.escape||te).source+"|"+l.source+"|"+(l===An?qn:te).source+"|"+(n.evaluate||te).source+"|$","g"),v="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Ye+"]")+"\n";t.replace(p,function(n,e,r,i,a,s){return r||(r=i),h+=t.slice(f,s).replace(ne,W),e&&(o=!0,h+="' +\n__e("+e+") +\n'"),a&&(u=!0,h+="';\n"+a+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=s+n.length,n}),h+="';\n";var d=n.variable;d||(h="with (obj) {\n"+h+"\n}\n"),h=(u?h.replace(wn,""):h).replace(En,"$1").replace(kn,"$1;"),h="function("+(d||"obj")+") {\n"+(d?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var _=np(function(){return ff(s,v+"return "+h).apply(it,c)});if(_.source=h,rs(_))throw _;return _}function wc(t){return As(t).toLowerCase()}function Ec(t){return As(t).toUpperCase()}function kc(t,n,e){if(t=As(t),t&&(e||n===it))return t.replace(Pn,"");if(!t||!(n=_i(n)))return t;var r=tt(t),i=tt(n),o=P(r,i),u=z(r,i)+1;return Ri(r,o,u).join("")}function Oc(t,n,e){if(t=As(t),t&&(e||n===it))return t.replace(Un,"");if(!t||!(n=_i(n)))return t;var r=tt(t),i=z(r,tt(n))+1;return Ri(r,0,i).join("")}function Sc(t,n,e){if(t=As(t),t&&(e||n===it))return t.replace(zn,"");if(!t||!(n=_i(n)))return t;var r=tt(t),i=P(r,tt(n));return Ri(r,i).join("")}function Rc(t,n){var e=Rt,r=Ct;if(ss(n)){var i="separator"in n?n.separator:i;e="length"in n?Ss(n.length):e,r="omission"in n?_i(n.omission):r}t=As(t);var o=t.length;if(G(t)){var u=tt(t);o=u.length}if(e>=o)return t;var a=e-Q(r);if(a<1)return r;var s=u?Ri(u,0,a).join(""):t.slice(0,a);if(i===it)return s+r;if(u&&(a+=s.length-a),Sh(i)){if(t.slice(a).search(i)){var c,f=s;for(i.global||(i=pf(i.source,As(Xn.exec(i))+"g")),i.lastIndex=0;c=i.exec(f);)var l=c.index;s=s.slice(0,l===it?a:l)}}else if(t.indexOf(_i(i),a)!=a){var h=s.lastIndexOf(i);h>-1&&(s=s.slice(0,h))}return s+r}function Cc(t){return t=As(t),t&&Rn.test(t)?t.replace(On,wr):t}function Tc(t,n,e){return t=As(t),n=e?it:n,n===it?$(t)?rt(t):x(t):t.match(n)||[]}function Ic(t){var n=null==t?0:t.length,e=Oo();return t=n?d(t,function(t){if("function"!=typeof t[1])throw new df(st);return[e(t[0]),t[1]]}):[],oi(function(e){for(var r=-1;++r<n;){var i=t[r];if(a(i[0],this,e))return a(i[1],this,e)}})}function Ac(t){return We(Ue(t,ht))}function Nc(t){return function(){return t}}function Mc(t,n){return null==t||t!==t?n:t}function Lc(t){return t}function Bc(t){return Ur("function"==typeof t?t:Ue(t,ht))}function jc(t){return Vr(Ue(t,ht))}function Dc(t,n){return qr(t,Ue(n,ht))}function Pc(t,n,e){var r=$s(n),i=ur(n,r);null!=e||ss(n)&&(i.length||!r.length)||(e=n,n=t,t=this,i=ur(n,$s(n)));var o=!(ss(e)&&"chain"in e&&!e.chain),u=os(t);return c(i,function(e){var r=n[e];t[e]=r,u&&(t.prototype[e]=function(){var n=this.__chain__;if(o||n){var e=t(this.__wrapped__),i=e.__actions__=Ui(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),e.__chain__=n,e}return r.apply(t,_([this.value()],arguments))})}),t}function zc(){return ar._===this&&(ar._=Sf),this}function Uc(){}function Wc(t){return t=Ss(t),oi(function(n){return Kr(n,t)})}function Fc(t){return Uo(t)?C(ru(t)):Qr(t)}function Gc(t){return function(n){return null==t?it:sr(t,n)}}function $c(){return[]}function Vc(){return!1}function qc(){return{}}function Xc(){return""}function Hc(){return!0}function Kc(t,n){if(t=Ss(t),t<1||t>Bt)return[];var e=Pt,r=Zf(t,Pt);n=Oo(n),t-=Pt;for(var i=M(r,n);++e<t;)n(e);return i}function Yc(t){return xh(t)?d(t,ru):bs(t)?[t]:Ui(jl(As(t)))}function Zc(t){var n=++wf;return As(t)+n}function Jc(t){return t&&t.length?He(t,Lc,hr):it}function Qc(t,n){return t&&t.length?He(t,Oo(n,2),hr):it}function tf(t){return R(t,Lc)}function nf(t,n){return R(t,Oo(n,2))}function ef(t){return t&&t.length?He(t,Lc,Gr):it}function rf(t,n){return t&&t.length?He(t,Oo(n,2),Gr):it}function of(t){return t&&t.length?N(t,Lc):0}function uf(t,n){return t&&t.length?N(t,Oo(n,2)):0}n=null==n?ar:kr.defaults(ar.Object(),n,kr.pick(ar,Ke));var af=n.Array,sf=n.Date,cf=n.Error,ff=n.Function,lf=n.Math,hf=n.Object,pf=n.RegExp,vf=n.String,df=n.TypeError,_f=af.prototype,yf=ff.prototype,mf=hf.prototype,gf=n["__core-js_shared__"],bf=yf.toString,xf=mf.hasOwnProperty,wf=0,Ef=function(){var t=/[^.]+$/.exec(gf&&gf.keys&&gf.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),kf=mf.toString,Of=bf.call(hf),Sf=ar._,Rf=pf("^"+bf.call(xf).replace(jn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Cf=fr?n.Buffer:it,Tf=n.Symbol,If=n.Uint8Array,Af=Cf?Cf.allocUnsafe:it,Nf=X(hf.getPrototypeOf,hf),Mf=hf.create,Lf=mf.propertyIsEnumerable,Bf=_f.splice,jf=Tf?Tf.isConcatSpreadable:it,Df=Tf?Tf.iterator:it,Pf=Tf?Tf.toStringTag:it,zf=function(){try{var t=Co(hf,"defineProperty");return t({},"",{}),t}catch(t){}}(),Uf=n.clearTimeout!==ar.clearTimeout&&n.clearTimeout,Wf=sf&&sf.now!==ar.Date.now&&sf.now,Ff=n.setTimeout!==ar.setTimeout&&n.setTimeout,Gf=lf.ceil,$f=lf.floor,Vf=hf.getOwnPropertySymbols,qf=Cf?Cf.isBuffer:it,Xf=n.isFinite,Hf=_f.join,Kf=X(hf.keys,hf),Yf=lf.max,Zf=lf.min,Jf=sf.now,Qf=n.parseInt,tl=lf.random,nl=_f.reverse,el=Co(n,"DataView"),rl=Co(n,"Map"),il=Co(n,"Promise"),ol=Co(n,"Set"),ul=Co(n,"WeakMap"),al=Co(hf,"create"),sl=ul&&new ul,cl={},fl=iu(el),ll=iu(rl),hl=iu(il),pl=iu(ol),vl=iu(ul),dl=Tf?Tf.prototype:it,_l=dl?dl.valueOf:it,yl=dl?dl.toString:it,ml=function(){function t(){}return function(n){if(!ss(n))return{};if(Mf)return Mf(n);t.prototype=n;var e=new t;return t.prototype=it,e}}();e.templateSettings={escape:Tn,evaluate:In,interpolate:An,variable:"",imports:{_:e}},e.prototype=r.prototype,e.prototype.constructor=e,i.prototype=ml(r.prototype),i.prototype.constructor=i,b.prototype=ml(r.prototype),b.prototype.constructor=b,et.prototype.clear=$n,et.prototype.delete=ee,et.prototype.get=re,et.prototype.has=ie,et.prototype.set=oe,ue.prototype.clear=ae,ue.prototype.delete=se,ue.prototype.get=ce,ue.prototype.has=fe,ue.prototype.set=le,he.prototype.clear=pe,he.prototype.delete=ve,he.prototype.get=de,he.prototype.has=_e,he.prototype.set=ye,me.prototype.add=me.prototype.push=ge,me.prototype.has=be,xe.prototype.clear=we,xe.prototype.delete=Ee,xe.prototype.get=ke,xe.prototype.has=Oe,xe.prototype.set=Se;var gl=qi(er),bl=qi(or,!0),xl=Xi(),wl=Xi(!0),El=sl?function(t,n){return sl.set(t,n),t}:Lc,kl=zf?function(t,n){return zf(t,"toString",{configurable:!0,enumerable:!1,value:Nc(n),writable:!0})}:Lc,Ol=oi,Sl=Uf||function(t){return ar.clearTimeout(t)},Rl=ol&&1/K(new ol([,-0]))[1]==Lt?function(t){return new ol(t)}:Uc,Cl=sl?function(t){return sl.get(t)}:Uc,Tl=Vf?function(t){return null==t?[]:(t=hf(t),h(Vf(t),function(n){return Lf.call(t,n)}))}:$c,Il=Vf?function(t){for(var n=[];t;)_(n,Tl(t)),t=Nf(t);return n}:$c,Al=lr;(el&&Al(new el(new ArrayBuffer(1)))!=hn||rl&&Al(new rl)!=Zt||il&&Al(il.resolve())!=nn||ol&&Al(new ol)!=on||ul&&Al(new ul)!=cn)&&(Al=function(t){var n=lr(t),e=n==tn?t.constructor:it,r=e?iu(e):"";if(r)switch(r){case fl:return hn;case ll:return Zt;case hl:return nn;case pl:return on;case vl:return cn}return n});var Nl=gf?os:Vc,Ml=nu(El),Ll=Ff||function(t,n){return ar.setTimeout(t,n)},Bl=nu(kl),jl=Xo(function(t){var n=[];return Ln.test(t)&&n.push(""),t.replace(Bn,function(t,e,r,i){n.push(r?i.replace(Vn,"$1"):e||t)}),n}),Dl=oi(function(t,n){return Za(t)?qe(t,nr(n,1,Za,!0)):[]}),Pl=oi(function(t,n){var e=Ou(n);return Za(e)&&(e=it),Za(t)?qe(t,nr(n,1,Za,!0),Oo(e,2)):[]}),zl=oi(function(t,n){var e=Ou(n);return Za(e)&&(e=it),Za(t)?qe(t,nr(n,1,Za,!0),it,e):[]}),Ul=oi(function(t){var n=d(t,ki);return n.length&&n[0]===t[0]?Sr(n):[]}),Wl=oi(function(t){var n=Ou(t),e=d(t,ki);return n===Ou(e)?n=it:e.pop(),e.length&&e[0]===t[0]?Sr(e,Oo(n,2)):[]}),Fl=oi(function(t){var n=Ou(t),e=d(t,ki);return n="function"==typeof n?n:it,n&&e.pop(),e.length&&e[0]===t[0]?Sr(e,it,n):[]}),Gl=oi(Cu),$l=bo(function(t,n){var e=null==t?0:t.length,r=Pe(t,n);return ni(t,d(n,function(t){return Po(t,e)?+t:t}).sort(ji)),r}),Vl=oi(function(t){return yi(nr(t,1,Za,!0))}),ql=oi(function(t){var n=Ou(t);return Za(n)&&(n=it),yi(nr(t,1,Za,!0),Oo(n,2))}),Xl=oi(function(t){var n=Ou(t);return n="function"==typeof n?n:it,yi(nr(t,1,Za,!0),it,n)}),Hl=oi(function(t,n){return Za(t)?qe(t,n):[]}),Kl=oi(function(t){return wi(h(t,Za))}),Yl=oi(function(t){var n=Ou(t);return Za(n)&&(n=it),wi(h(t,Za),Oo(n,2))}),Zl=oi(function(t){var n=Ou(t);return n="function"==typeof n?n:it,wi(h(t,Za),it,n)}),Jl=oi(Yu),Ql=oi(function(t){var n=t.length,e=n>1?t[n-1]:it;return e="function"==typeof e?(t.pop(),e):it,Zu(t,e)}),th=bo(function(t){var n=t.length,e=n?t[0]:0,r=this.__wrapped__,o=function(n){return Pe(n,t)};return!(n>1||this.__actions__.length)&&r instanceof b&&Po(e)?(r=r.slice(e,+e+(n?1:0)),r.__actions__.push({func:ea,args:[o],thisArg:it}),new i(r,this.__chain__).thru(function(t){return n&&!t.length&&t.push(it),t})):this.thru(o)}),nh=$i(function(t,n,e){xf.call(t,e)?++t[e]:De(t,e,1)}),eh=Qi(du),rh=Qi(_u),ih=$i(function(t,n,e){xf.call(t,e)?t[e].push(n):De(t,e,[n])}),oh=oi(function(t,n,e){var r=-1,i="function"==typeof n,o=Ya(t)?af(t.length):[];return gl(t,function(t){o[++r]=i?a(n,t,e):Cr(t,n,e)}),o}),uh=$i(function(t,n,e){De(t,e,n)}),ah=$i(function(t,n,e){t[e?0:1].push(n)},function(){return[[],[]]}),sh=oi(function(t,n){if(null==t)return[];var e=n.length;return e>1&&zo(t,n[0],n[1])?n=[]:e>2&&zo(n[0],n[1],n[2])&&(n=[n[0]]),Yr(t,nr(n,1),[])}),ch=Wf||function(){return ar.Date.now()},fh=oi(function(t,n,e){var r=yt;if(e.length){var i=H(e,ko(fh));r|=wt}return ho(t,r,n,e,i)}),lh=oi(function(t,n,e){var r=yt|mt;if(e.length){var i=H(e,ko(lh));r|=wt}return ho(n,r,t,e,i)}),hh=oi(function(t,n){return Ve(t,1,n)}),ph=oi(function(t,n,e){return Ve(t,Cs(n)||0,e)});Ba.Cache=he;var vh=Ol(function(t,n){n=1==n.length&&xh(n[0])?d(n[0],B(Oo())):d(nr(n,1),B(Oo()));var e=n.length;return oi(function(r){for(var i=-1,o=Zf(r.length,e);++i<o;)r[i]=n[i].call(this,r[i]);return a(t,this,r)})}),dh=oi(function(t,n){var e=H(n,ko(dh));return ho(t,wt,it,n,e)}),_h=oi(function(t,n){var e=H(n,ko(_h));return ho(t,Et,it,n,e)}),yh=bo(function(t,n){return ho(t,Ot,it,it,it,n)}),mh=so(hr),gh=so(function(t,n){return t>=n}),bh=Tr(function(){return arguments}())?Tr:function(t){return cs(t)&&xf.call(t,"callee")&&!Lf.call(t,"callee")},xh=af.isArray,wh=pr?B(pr):Ir,Eh=qf||Vc,kh=vr?B(vr):Ar,Oh=dr?B(dr):Lr,Sh=_r?B(_r):Dr,Rh=yr?B(yr):Pr,Ch=mr?B(mr):zr,Th=so(Gr),Ih=so(function(t,n){return t<=n}),Ah=Vi(function(t,n){if($o(n)||Ya(n))return void Wi(n,$s(n),t);for(var e in n)xf.call(n,e)&&Ne(t,e,n[e])}),Nh=Vi(function(t,n){Wi(n,Vs(n),t)}),Mh=Vi(function(t,n,e,r){Wi(n,Vs(n),t,r)}),Lh=Vi(function(t,n,e,r){Wi(n,$s(n),t,r)}),Bh=bo(Pe),jh=oi(function(t){return t.push(it,po),a(Mh,it,t)}),Dh=oi(function(t){return t.push(it,vo),a(Fh,it,t)}),Ph=eo(function(t,n,e){t[n]=e},Nc(Lc)),zh=eo(function(t,n,e){xf.call(t,n)?t[n].push(e):t[n]=[e]},Oo),Uh=oi(Cr),Wh=Vi(function(t,n,e){Xr(t,n,e)}),Fh=Vi(function(t,n,e,r){Xr(t,n,e,r)}),Gh=bo(function(t,n){var e={};if(null==t)return e;var r=!1;n=d(n,function(n){return n=Si(n,t),r||(r=n.length>1),n}),Wi(t,wo(t),e),r&&(e=Ue(e,ht|pt|vt,_o));for(var i=n.length;i--;)mi(e,n[i]);return e}),$h=bo(function(t,n){return null==t?{}:Zr(t,n)}),Vh=lo($s),qh=lo(Vs),Xh=Yi(function(t,n,e){return n=n.toLowerCase(),t+(e?sc(n):n)}),Hh=Yi(function(t,n,e){return t+(e?"-":"")+n.toLowerCase()}),Kh=Yi(function(t,n,e){return t+(e?" ":"")+n.toLowerCase()}),Yh=Ki("toLowerCase"),Zh=Yi(function(t,n,e){return t+(e?"_":"")+n.toLowerCase()}),Jh=Yi(function(t,n,e){return t+(e?" ":"")+tp(n)}),Qh=Yi(function(t,n,e){return t+(e?" ":"")+n.toUpperCase();
}),tp=Ki("toUpperCase"),np=oi(function(t,n){try{return a(t,it,n)}catch(t){return rs(t)?t:new cf(t)}}),ep=bo(function(t,n){return c(n,function(n){n=ru(n),De(t,n,fh(t[n],t))}),t}),rp=to(),ip=to(!0),op=oi(function(t,n){return function(e){return Cr(e,t,n)}}),up=oi(function(t,n){return function(e){return Cr(t,e,n)}}),ap=io(d),sp=io(l),cp=io(g),fp=ao(),lp=ao(!0),hp=ro(function(t,n){return t+n},0),pp=fo("ceil"),vp=ro(function(t,n){return t/n},1),dp=fo("floor"),_p=ro(function(t,n){return t*n},1),yp=fo("round"),mp=ro(function(t,n){return t-n},0);return e.after=Ca,e.ary=Ta,e.assign=Ah,e.assignIn=Nh,e.assignInWith=Mh,e.assignWith=Lh,e.at=Bh,e.before=Ia,e.bind=fh,e.bindAll=ep,e.bindKey=lh,e.castArray=Ga,e.chain=ta,e.chunk=au,e.compact=su,e.concat=cu,e.cond=Ic,e.conforms=Ac,e.constant=Nc,e.countBy=nh,e.create=Ns,e.curry=Aa,e.curryRight=Na,e.debounce=Ma,e.defaults=jh,e.defaultsDeep=Dh,e.defer=hh,e.delay=ph,e.difference=Dl,e.differenceBy=Pl,e.differenceWith=zl,e.drop=fu,e.dropRight=lu,e.dropRightWhile=hu,e.dropWhile=pu,e.fill=vu,e.filter=la,e.flatMap=ha,e.flatMapDeep=pa,e.flatMapDepth=va,e.flatten=yu,e.flattenDeep=mu,e.flattenDepth=gu,e.flip=La,e.flow=rp,e.flowRight=ip,e.fromPairs=bu,e.functions=zs,e.functionsIn=Us,e.groupBy=ih,e.initial=Eu,e.intersection=Ul,e.intersectionBy=Wl,e.intersectionWith=Fl,e.invert=Ph,e.invertBy=zh,e.invokeMap=oh,e.iteratee=Bc,e.keyBy=uh,e.keys=$s,e.keysIn=Vs,e.map=ma,e.mapKeys=qs,e.mapValues=Xs,e.matches=jc,e.matchesProperty=Dc,e.memoize=Ba,e.merge=Wh,e.mergeWith=Fh,e.method=op,e.methodOf=up,e.mixin=Pc,e.negate=ja,e.nthArg=Wc,e.omit=Gh,e.omitBy=Hs,e.once=Da,e.orderBy=ga,e.over=ap,e.overArgs=vh,e.overEvery=sp,e.overSome=cp,e.partial=dh,e.partialRight=_h,e.partition=ah,e.pick=$h,e.pickBy=Ks,e.property=Fc,e.propertyOf=Gc,e.pull=Gl,e.pullAll=Cu,e.pullAllBy=Tu,e.pullAllWith=Iu,e.pullAt=$l,e.range=fp,e.rangeRight=lp,e.rearg=yh,e.reject=wa,e.remove=Au,e.rest=Pa,e.reverse=Nu,e.sampleSize=ka,e.set=Zs,e.setWith=Js,e.shuffle=Oa,e.slice=Mu,e.sortBy=sh,e.sortedUniq=Uu,e.sortedUniqBy=Wu,e.split=gc,e.spread=za,e.tail=Fu,e.take=Gu,e.takeRight=$u,e.takeRightWhile=Vu,e.takeWhile=qu,e.tap=na,e.throttle=Ua,e.thru=ea,e.toArray=ks,e.toPairs=Vh,e.toPairsIn=qh,e.toPath=Yc,e.toPlainObject=Ts,e.transform=Qs,e.unary=Wa,e.union=Vl,e.unionBy=ql,e.unionWith=Xl,e.uniq=Xu,e.uniqBy=Hu,e.uniqWith=Ku,e.unset=tc,e.unzip=Yu,e.unzipWith=Zu,e.update=nc,e.updateWith=ec,e.values=rc,e.valuesIn=ic,e.without=Hl,e.words=Tc,e.wrap=Fa,e.xor=Kl,e.xorBy=Yl,e.xorWith=Zl,e.zip=Jl,e.zipObject=Ju,e.zipObjectDeep=Qu,e.zipWith=Ql,e.entries=Vh,e.entriesIn=qh,e.extend=Nh,e.extendWith=Mh,Pc(e,e),e.add=hp,e.attempt=np,e.camelCase=Xh,e.capitalize=sc,e.ceil=pp,e.clamp=oc,e.clone=$a,e.cloneDeep=qa,e.cloneDeepWith=Xa,e.cloneWith=Va,e.conformsTo=Ha,e.deburr=cc,e.defaultTo=Mc,e.divide=vp,e.endsWith=fc,e.eq=Ka,e.escape=lc,e.escapeRegExp=hc,e.every=fa,e.find=eh,e.findIndex=du,e.findKey=Ms,e.findLast=rh,e.findLastIndex=_u,e.findLastKey=Ls,e.floor=dp,e.forEach=da,e.forEachRight=_a,e.forIn=Bs,e.forInRight=js,e.forOwn=Ds,e.forOwnRight=Ps,e.get=Ws,e.gt=mh,e.gte=gh,e.has=Fs,e.hasIn=Gs,e.head=xu,e.identity=Lc,e.includes=ya,e.indexOf=wu,e.inRange=uc,e.invoke=Uh,e.isArguments=bh,e.isArray=xh,e.isArrayBuffer=wh,e.isArrayLike=Ya,e.isArrayLikeObject=Za,e.isBoolean=Ja,e.isBuffer=Eh,e.isDate=kh,e.isElement=Qa,e.isEmpty=ts,e.isEqual=ns,e.isEqualWith=es,e.isError=rs,e.isFinite=is,e.isFunction=os,e.isInteger=us,e.isLength=as,e.isMap=Oh,e.isMatch=fs,e.isMatchWith=ls,e.isNaN=hs,e.isNative=ps,e.isNil=ds,e.isNull=vs,e.isNumber=_s,e.isObject=ss,e.isObjectLike=cs,e.isPlainObject=ys,e.isRegExp=Sh,e.isSafeInteger=ms,e.isSet=Rh,e.isString=gs,e.isSymbol=bs,e.isTypedArray=Ch,e.isUndefined=xs,e.isWeakMap=ws,e.isWeakSet=Es,e.join=ku,e.kebabCase=Hh,e.last=Ou,e.lastIndexOf=Su,e.lowerCase=Kh,e.lowerFirst=Yh,e.lt=Th,e.lte=Ih,e.max=Jc,e.maxBy=Qc,e.mean=tf,e.meanBy=nf,e.min=ef,e.minBy=rf,e.stubArray=$c,e.stubFalse=Vc,e.stubObject=qc,e.stubString=Xc,e.stubTrue=Hc,e.multiply=_p,e.nth=Ru,e.noConflict=zc,e.noop=Uc,e.now=ch,e.pad=pc,e.padEnd=vc,e.padStart=dc,e.parseInt=_c,e.random=ac,e.reduce=ba,e.reduceRight=xa,e.repeat=yc,e.replace=mc,e.result=Ys,e.round=yp,e.runInContext=t,e.sample=Ea,e.size=Sa,e.snakeCase=Zh,e.some=Ra,e.sortedIndex=Lu,e.sortedIndexBy=Bu,e.sortedIndexOf=ju,e.sortedLastIndex=Du,e.sortedLastIndexBy=Pu,e.sortedLastIndexOf=zu,e.startCase=Jh,e.startsWith=bc,e.subtract=mp,e.sum=of,e.sumBy=uf,e.template=xc,e.times=Kc,e.toFinite=Os,e.toInteger=Ss,e.toLength=Rs,e.toLower=wc,e.toNumber=Cs,e.toSafeInteger=Is,e.toString=As,e.toUpper=Ec,e.trim=kc,e.trimEnd=Oc,e.trimStart=Sc,e.truncate=Rc,e.unescape=Cc,e.uniqueId=Zc,e.upperCase=Qh,e.upperFirst=tp,e.each=da,e.eachRight=_a,e.first=xu,Pc(e,function(){var t={};return er(e,function(n,r){xf.call(e.prototype,r)||(t[r]=n)}),t}(),{chain:!1}),e.VERSION=ot,c(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),c(["drop","take"],function(t,n){b.prototype[t]=function(e){e=e===it?1:Yf(Ss(e),0);var r=this.__filtered__&&!n?new b(this):this.clone();return r.__filtered__?r.__takeCount__=Zf(e,r.__takeCount__):r.__views__.push({size:Zf(e,Pt),type:t+(r.__dir__<0?"Right":"")}),r},b.prototype[t+"Right"]=function(n){return this.reverse()[t](n).reverse()}}),c(["filter","map","takeWhile"],function(t,n){var e=n+1,r=e==At||e==Mt;b.prototype[t]=function(t){var n=this.clone();return n.__iteratees__.push({iteratee:Oo(t,3),type:e}),n.__filtered__=n.__filtered__||r,n}}),c(["head","last"],function(t,n){var e="take"+(n?"Right":"");b.prototype[t]=function(){return this[e](1).value()[0]}}),c(["initial","tail"],function(t,n){var e="drop"+(n?"":"Right");b.prototype[t]=function(){return this.__filtered__?new b(this):this[e](1)}}),b.prototype.compact=function(){return this.filter(Lc)},b.prototype.find=function(t){return this.filter(t).head()},b.prototype.findLast=function(t){return this.reverse().find(t)},b.prototype.invokeMap=oi(function(t,n){return"function"==typeof t?new b(this):this.map(function(e){return Cr(e,t,n)})}),b.prototype.reject=function(t){return this.filter(ja(Oo(t)))},b.prototype.slice=function(t,n){t=Ss(t);var e=this;return e.__filtered__&&(t>0||n<0)?new b(e):(t<0?e=e.takeRight(-t):t&&(e=e.drop(t)),n!==it&&(n=Ss(n),e=n<0?e.dropRight(-n):e.take(n-t)),e)},b.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},b.prototype.toArray=function(){return this.take(Pt)},er(b.prototype,function(t,n){var r=/^(?:filter|find|map|reject)|While$/.test(n),o=/^(?:head|last)$/.test(n),u=e[o?"take"+("last"==n?"Right":""):n],a=o||/^find/.test(n);u&&(e.prototype[n]=function(){var n=this.__wrapped__,s=o?[1]:arguments,c=n instanceof b,f=s[0],l=c||xh(n),h=function(t){var n=u.apply(e,_([t],s));return o&&p?n[0]:n};l&&r&&"function"==typeof f&&1!=f.length&&(c=l=!1);var p=this.__chain__,v=!!this.__actions__.length,d=a&&!p,y=c&&!v;if(!a&&l){n=y?n:new b(this);var m=t.apply(n,s);return m.__actions__.push({func:ea,args:[h],thisArg:it}),new i(m,p)}return d&&y?t.apply(this,s):(m=this.thru(h),d?o?m.value()[0]:m.value():m)})}),c(["pop","push","shift","sort","splice","unshift"],function(t){var n=_f[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var e=this.value();return n.apply(xh(e)?e:[],t)}return this[r](function(e){return n.apply(xh(e)?e:[],t)})}}),er(b.prototype,function(t,n){var r=e[n];if(r){var i=r.name+"",o=cl[i]||(cl[i]=[]);o.push({name:n,func:r})}}),cl[no(it,mt).name]=[{name:"wrapper",func:it}],b.prototype.clone=T,b.prototype.reverse=Z,b.prototype.value=nt,e.prototype.at=th,e.prototype.chain=ra,e.prototype.commit=ia,e.prototype.next=oa,e.prototype.plant=aa,e.prototype.reverse=sa,e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=ca,e.prototype.first=e.prototype.head,Df&&(e.prototype[Df]=ua),e},kr=Er();ar._=kr,r=function(){return kr}.call(n,e,n,i),!(r!==it&&(i.exports=r))}).call(this)}).call(n,function(){return this}(),e(37)(t))},function(t,n,e){var r=e(7),i={};i.ParserException=function(t,n){this.message=r.get(n.code,n.detail),this.on=t,this.reason=n},i.ParserException.prototype=new Error,i.InterpreterException=function(t,n){this.message=r.get(n.code,n.detail),this.on=t,this.reason=n},i.InterpreterException.prototype=new Error,i.GobstonesError=function(t){this.message=r.get(t.code,t.detail),this.reason=t},i.GobstonesError.prototype=new Error,i.throwTypeMismatch=function(t,n,e){throw new i.InterpreterException(t,{code:"type_mismatch",detail:{expected:n,actual:e}})},t.exports=i},function(t,n){var e={PROGRAM:"program",INTERACTIVE:"interactive",PROCEDURE:"procedure",FUNCTION:"function",RETURN:"return",DROP:"Poner",MOVE:"Mover",GRAB:"Sacar",BOOM:"BOOM",MOVE_TO_EDGE:"IrAlBorde",CLEAN_BOARD:"VaciarTablero",REPEAT:"repeat",WHILE:"while",FOR_EACH:"foreach",IN:"in",IF:"if",THEN:"then",ELSE:"else",SWITCH:"switch",TO:"to",OPPOSITE:"opuesto",NEXT:"siguiente",PREVIOUS:"previo",DIV:"div",MOD:"mod",NOT:"not",HAS_STONES:"hayBolitas",CAN_MOVE:"puedeMover",NUM_STONES:"nroBolitas",MIN_DIR:"minDir",MAX_DIR:"maxDir",MIN_COLOR:"minColor",MAX_COLOR:"maxColor",MIN_BOOL:"minBool",MAX_BOOL:"maxBool",RED:"Rojo",BLUE:"Azul",BLACK:"Negro",GREEN:"Verde",TRUE:"True",FALSE:"False",NORTH:"Norte",SOUTH:"Sur",EAST:"Este",WEST:"Oeste",BOOLEAN:"Booleano",COLOR:"Color",DIRECTION:"Dirección",NUMBER:"Número",STRING:"Mensaje de error entre comillas"};t.exports=e},function(t,n,e){function r(t,n){this.x=0,this.y=0,this.sizeX=t,this.sizeY=n,this.snapshots=[]}var i=e(2),o=e(8);r.blue=0,r.red=1,r.black=2,r.green=3,r.north=[0,1],r.east=[1,0],r.south=[0,-1],r.west=[-1,0],r.minDir=r.north,r.maxDir=r.west,r.minColor=r.blue,r.maxColor=r.green,r.prototype.init=function(){this.table=[[],[],[],[]];for(var t=0;t<this.sizeX;t++){this.table[0][t]=[],this.table[1][t]=[],this.table[2][t]=[],this.table[3][t]=[];for(var n=0;n<this.sizeY;n++)this.table[0][t][n]=0,this.table[1][t][n]=0,this.table[2][t][n]=0,this.table[3][t][n]=0}},r.prototype.clone=function(){var t=new r(this.sizeX,this.sizeY);t.init();for(var n=0;n<this.sizeX;n++){t.table[0][n]=[],t.table[1][n]=[],t.table[2][n]=[],t.table[3][n]=[];for(var e=0;e<this.sizeY;e++)t.table[0][n][e]=this.table[0][n][e],t.table[1][n][e]=this.table[1][n][e],t.table[2][n][e]=this.table[2][n][e],t.table[3][n][e]=this.table[3][n][e]}return t.x=this.x,t.y=this.y,t},r.prototype.dropStones=function(t,n){this.table[t][this.x][this.y]+=n},r.prototype.putStone=function(t,n){this.dropStones(t,1),this.saveSnapshot(n)},r.prototype.removeStone=function(t,n){if(this.table[t][this.x][this.y]<=0)throw new i.GobstonesError({code:"no_stones"});this.table[t][this.x][this.y]-=1,this.saveSnapshot(n)},r.prototype.clear=function(t){this.init(),this.saveSnapshot(t)},r.prototype.move=function(t,n){if(!this.canMove(t))throw new i.GobstonesError({code:"out_of_board",detail:{x:this.x,y:this.y}});this.x+=t[0],this.y+=t[1],this.saveSnapshot(n)},r.prototype.moveToEdge=function(t,n){1===t[0]?this.x=this.sizeX-1:t[0]===-1?this.x=0:1===t[1]?this.y=this.sizeY-1:t[1]===-1&&(this.y=0),this.saveSnapshot(n)},r.prototype.boom=function(t){throw new i.GobstonesError({code:"boom_called",detail:{message:t}})},r.prototype.amountStones=function(t){return this.table[t][this.x][this.y]},r.prototype.canMove=function(t){var n=this.x+t[0],e=this.y+t[1];return n<this.sizeX&&n>=0&&e<this.sizeY&&e>=0},r.prototype.printAscii=function(){for(var t=this.sizeX+"x"+this.sizeY+"\n",n=this.table[0],e=this.table[1],r=this.table[2],i=this.table[3],o=this.sizeY-1;o>=0;o--){for(var u=0;u<this.sizeX;u++)t+=n[u][o]||e[u][o]||r[u][o]||i[u][o]?"#":".";t+="\n"}return t},r.prototype.toView=function(){return o.toView(this.table)},r.prototype.fromView=function(t){return this.table=o.toModel(t),this},r.prototype.saveSnapshot=function(t){t.board=this.clone(),this.snapshots.push(t)},t.exports=r},function(t,n,e){var r=e(1);t.exports=function(t,n,e,i,o,u){var a=n.name,s=n.nameType,c=i[0];if(void 0===c)throw new t.errors.InterpreterException(e,{code:"wrong_arity",detail:{nameType:s,name:a,expected:1,actual:0}});var f=c.eval(u.context,r.omit(u.options||{},"attribute")),l=void 0!==f&&void 0!==f.value?f.value:f;if(void 0!==f&&void 0!==f.type&&void 0!==o&&f.type!==o)throw new t.errors.InterpreterException(e,{code:"call_type_mismatch",detail:{name:a,expected:o,actual:f.type}});if(void 0===l){var h=c.token.value,p=h[0]&&h[0]===h[0].toUpperCase()?"undefined_literal":"undefined_name";throw new t.errors.InterpreterException(c.token,{code:p,detail:{name:c.token.value}})}return c.eval(u.context,u.options)}},function(t,n){t.exports={LOOP_TIMEOUT:3e3}},function(t,n,e){var r=e(1),i="es",o={es:e(16)};t.exports={setLanguage:function(t){if(!o[t])throw new Error(r.template("Language <%=name%> is not supported yet.")({name:t}));i=t},get:function(t,n){var e=this.getLocales()[t];return r.isFunction(e)?e(n):r.template(e)(n)},getLocales:function(){return o[i]}}},function(t,n,e){var r=e(1),i={};i.toView=function(t){var n=function(n,e){return t[n].map(function(t){return t.map(function(t){var n={};return n[e]=t,n})})},e=n(0,"blue"),i=n(1,"red"),o=n(2,"black"),u=n(3,"green");return r(e).zipWith(i,o,u,r.merge).unzip().reverse().value()},i.toModel=function(t){var n=r(r.cloneDeep(t)).reverse().unzip().value(),e=function(t){return n.map(function(n){return n.map(function(n){return n[t]})})};return[e("blue"),e("red"),e("black"),e("green")]},t.exports=i},function(t,n,e){var r=e(1),i=e(3);t.exports=function(t){return r.isNumber(t)?{type:i.NUMBER,value:t}:r.isBoolean(t)?{type:i.BOOLEAN,value:t}:r.isArray(t)?{type:i.DIRECTION,value:t}:t}},function(t,n){var e={};e.build=function(t){var n=this,e=t.toView(),r="";return r=this._add(r,"GBB/1.0"),r=this._add(r,this._join(["size",t.sizeX,t.sizeY])),e.forEach(function(e,i){var o=t.sizeY-1-i;e.forEach(function(t,e){if(0!==t.blue||0!==t.black||0!==t.red||0!==t.green){var i=n._join(["Azul",t.blue,"Negro",t.black,"Rojo",t.red,"Verde",t.green]);r=n._add(r,n._join(["cell",e,o,i]))}})}),r=this._add(r,this._join(["head",t.x,t.y]))},e._add=function(t,n){return t+n+"\r\n"},e._join=function(t){return t.join(" ")},t.exports=e},function(t,n,e){var r=e(4),i=e(36),o={};o.fromString=function(t){var n=this._try(t),e=i.splitByLines(n),r=e.filter(function(t){return!/GBB\/(\d\.)+\d$/.test(t)&&""!==t});return this._buildBoard(r)},o._buildBoard=function(t){var n=this._getDimensions(t),e=this._getHeader(t);try{var i=new r(n[0],n[1]);return i.init(),this._putCells(t,i),i.x=e[0],i.y=e[1],i}catch(t){var o=new Error("Error building the board");throw o.inner=t,o}},o._getDimensions=function(t){var n=this._try(t[0].match(/^size (\d+) (\d+)$/),"dimensions");return this._getPositionOf(n)},o._getHeader=function(t){var n=this._try(t[t.length-1].match(/^head (\d+) (\d+)$/),"header");return this._getPositionOf(n)},o._putCells=function(t,n){var e=/^cell (\d+) (\d+)/,r=t.filter(function(t){return e.test(t)});r.forEach(function(t){var r=t.match(e),i=this._getPositionOf(r,t);n.x=i[0],n.y=i[1],this._putBalls(t,n)}.bind(this))},o._putBalls=function(t,n){var e=i.scan(t,/(Azul|Negro|Rojo|Verde) (\d+)/g),o=function(t){var n=e.filter(function(n){return n[0]===t});return parseInt((n[0]||{})[1]||0,0)};n.dropStones(r.blue,o("Azul")),n.dropStones(r.black,o("Negro")),n.dropStones(r.red,o("Rojo")),n.dropStones(r.green,o("Verde"))},o._getPositionOf=function(t,n){return t=t||{},[this._try(t[1],n),this._try(t[2],n)].map(function(t){return parseInt(t,0)})},o._try=function(t,n){if(!t)throw new Error("Error parsing "+(n||"GBB file"));return t},t.exports=o},function(t,n,e){var r=e(22),i=e(3);t.exports=function(t){function n(){l.advance("{");for(var t=[];;){var n=l.expression(0);l.advance("->");var e=c(l);if(t.push({case:n,body:e}),"}"===l.token.id||!l.tokens.hasNext())break}return l.advance("}"),t}function e(t){var n=[];if(")"!==t.token.id)for(;n.push(t.expression(0)),","===t.token.id;)t.advance(",");return n}function o(t){t.advance("(");var n=e(t);return t.advance(")"),n}function u(){var t=[];if(l.advance("("),")"!==l.token.id)for(;"name"!==l.token.arity&&("operator"===l.token.arity?l.error(l.token,{code:"expecting_parameter_name"}):l.error(l.token,{code:"invalid_name",detail:{nameType:"parameter",value:l.token.value}})),t.push(l.token),l.advance(),","===l.token.id;)l.advance(",");return l.advance(")"),t}function a(){l.advance("(");var t=l.expression(0);return l.advance(")"),t}function s(){return l.block()||[]}function c(){return"{"===l.token.id?s():[l.statement()]}function f(n,e,r,i){var o=l.symbol(n);o.nud=function(){return new t.node.Constant(o,e,r,i)}}var l=new t.Parser(new t.Lexer),h=l;h.symbol("(end)"),h.symbol('"'),h.symbol("(literal)").nud=function(){return new t.node.NumericLiteral(this,this.value)},h.symbol("(string)").nud=function(){return new t.node.String(this,this.value)},h.symbol("(name)").nud=function(){return new t.node.Variable(this,this.value)},h.op("||",20,t.node.OrOperation),h.op("&&",25,t.node.AndOperation),h.op("+",50,t.node.SumOperation),h.op("-",50,t.node.DiffOperation),h.op("*",60,t.node.MulOperation),h.op(i.DIV,70,t.node.DivOperation),h.op(i.MOD,70,t.node.ModOperation),h.infixr("^",80,function(n){return new t.node.ExpOperation(l.token,n,l.expression(80))}),h.prefix(i.NOT,function(){return new t.node.NotOperation(l.token,l.expression(70))}),h.prefix("-",function(){return new t.node.SubstractionOperation(l.token,l.expression(70))}),h.op("==",40,t.node.EqOperation),h.op("/=",40,t.node.NotEqualOperation),h.op("<",40,t.node.LessOperation),h.op(">",40,t.node.GraterOperation),h.op("<=",40,t.node.LessEqualOperation),h.op(">=",40,t.node.GreaterEqualOperation),f(i.FALSE,"False",!1,i.BOOLEAN),f(i.TRUE,"True",!0,i.BOOLEAN),f(i.BLUE,"Blue",0,i.COLOR),f(i.RED,"Red",1,i.COLOR),f(i.BLACK,"Black",2,i.COLOR),f(i.GREEN,"Green",3,i.COLOR),f(i.NORTH,"North",[0,1],i.DIRECTION),f(i.SOUTH,"South",[0,-1],i.DIRECTION),f(i.EAST,"East",[1,0],i.DIRECTION),f(i.WEST,"West",[-1,0],i.DIRECTION),h.symbol(":"),h.symbol(")"),h.symbol("("),h.symbol("["),h.symbol("]"),h.symbol("}"),h.symbol(","),h.symbol("->"),h.symbol(".."),h.symbol(i.IN),h.symbol(i.ELSE),h.symbol(i.TO);var p={separator:";"};return h.stmt(";",function(){return p}),h.infix("(",80,function(n){n.token=n.token||n,"name"!==n.token.arity&&l.error(n.token,{code:"not_a_function_or_procedure",detail:{name:n.token.value}});var r=e(l);l.advance(")");var i;return i=n.token.value[0].toUpperCase()===n.token.value[0]?new t.node.ProcedureCall(n.token,function(){return l.scope.find(n.token.value)},r):new t.node.FunctionCall(n.token,function(){return l.scope.find(n.token.value)},r)}),h.infixr(":=",10,function(n){if("."!==n.id&&"["!==n.id&&(!n.token||"name"!==n.token.arity)){var e=n.token||l.token,r=n.token?n.token.value:"";l.error(e,{code:"invalid_name",detail:{nameType:"variable",value:r}})}return new t.node.Assignment({},n,l.expression(9))}),h.stmt(i.DROP,function(){return new t.node.PutStone(l.token,o(l))}),h.stmt(i.GRAB,function(){return new t.node.RemoveStone(l.token,o(l))}),h.stmt(i.MOVE,function(){return new t.node.MoveClaw(l.token,o(l))}),h.stmt(i.MOVE_TO_EDGE,function(){return new t.node.MoveToEdge(l.token,o(l))}),h.stmt(i.CLEAN_BOARD,function(){return new t.node.CleanBoard(l.token,o(l))}),h.stmt(i.BOOM,function(){return new t.node.Boom(l.token,o(l))}),h.prefix(i.OPPOSITE,function(){return new t.node.Opposite(l.token,o(l))}),h.prefix(i.HAS_STONES,function(){return new t.node.HasStones(l.token,o(l))}),h.prefix(i.NUM_STONES,function(){return new t.node.NumStones(l.token,o(l))}),h.prefix(i.MAX_COLOR,function(){return new t.node.MaxColor(l.token,o(l))}),h.prefix(i.MIN_COLOR,function(){return new t.node.MinColor(l.token,o(l))}),h.prefix(i.MAX_DIR,function(){return new t.node.MaxDir(l.token,o(l))}),h.prefix(i.MIN_DIR,function(){return new t.node.MinDir(l.token,o(l))}),h.prefix(i.MAX_BOOL,function(){return new t.node.MaxBool(l.token,o(l))}),h.prefix(i.MIN_BOOL,function(){return new t.node.MinBool(l.token,o(l))}),h.prefix(i.CAN_MOVE,function(){var n=l.token,e=o(l);return new t.node.CanMove(n,e)}),h.stmt(i.IF,function(){var n=l.token;l.advance("(");var e=l.expression(0);l.advance(")");var r=s(l),o=null;return l.token.id===i.ELSE&&(l.scope.reserve(l.token),l.advance(i.ELSE),o=s(l)),new t.node.If(n,e,r,o)}),h.stmt(i.SWITCH,function(){var e=l.token,r=a(l);return l.token.id===i.TO&&l.advance(i.TO),new t.node.Switch(e,r,n())}),h.stmt(i.WHILE,function(){return new t.node.While(l.token,a(l),s(l))}),h.stmt(i.REPEAT,function(){return new t.node.Repeat(l.token,a(l),s(l))}),h.stmt(i.FOR_EACH,function(){var n=l.expression();"name"!==n.token.arity&&l.error(n.token,{code:"invalid_name",detail:{nameType:"index",value:n.token.value}}),l.advance(i.IN),l.advance("[");var r=e(l);return l.advance("]"),new t.node.ForEach(l.token,n,r,l.block())}),h.stmt("{",function(){var t=l.statements();return l.advance("}"),t}),h.stmt("(",function(){var t=l.statements();return l.advance(")"),t}),h.prefix("(",function(){var t=l.expression(0);return l.advance(")"),t}),h.root(i.PROGRAM,function(){return new t.node.Program(l.token,l.block())}),h.root(i.INTERACTIVE,function(){l.advance("program");var e=l.token,i=n();return i.forEach(function(t,n){var e=n+1,o={code:"invalid_key",detail:{key:t.case.value}};if("ProcedureCall"===t.case.alias&&"TIMEOUT"===t.case.name){e!==i.length&&l.error(t.case.token,{code:"place_timeout_at_the_end"});var u=t.case.parameters[0];return(1!==t.case.parameters.length||"NumericLiteral"!==u.alias||u.value<1||u.value>6e4)&&l.error(u.token,{code:"timeout_outside_bounds"}),void(t.case.timeout=u.value)}return"string"!=typeof t.case.value&&l.error(t.case.token,o),"INIT"===t.case.value?(0!==n&&l.error(t.case.token,{code:"place_init_at_the_start"}),void(t.case.init=!0)):void(r(t.case.value)||l.error(t.case.token,o))}),new t.node.InteractiveProgram(e,i)}),h.root(i.FUNCTION,function(){l.newScope();var n=l.token;"name"===l.token.arity?(l.token.value[0]!==l.token.value[0].toLowerCase()&&l.error(n,{code:"function_name_should_start_with_lowercase",detail:{name:n.value}}),l.scope.define(n),l.advance()):l.error(n,{code:"expecting_function_name"});var e=u(l),r=s(l),i=r.pop();i&&"return"===i.alias&&i.expression||l.error(n,{code:"function_must_end_with_return",detail:{name:n.value}}),l.scope.pop();var o=new t.node.FunctionDeclaration(n,e,r,i);return n.declaration=o,o}),h.stmt(i.RETURN,function(){return new t.node.ReturnStatement(l.token,a(l))}),h.root(i.PROCEDURE,function(){l.newScope();var n=l.token;"name"===l.token.arity?(l.token.value[0]!==l.token.value[0].toUpperCase()&&l.error(n,{code:"procedure_name_should_start_with_uppercase",detail:{name:n.value}}),l.scope.define(n),l.advance()):l.error(n,{code:"expecting_procedure_name"});var e=u(l),r=s();l.scope.pop();var i=new t.node.ProcedureDeclaration(n,e,r);return n.declaration=i,i}),h.parse=function(n){for(var e,r=[],i=l.parseProgram(n),o=0;o<i.length;o++)"program"===i[o].alias||"interactiveProgram"===i[o].alias?e=i[o]:r.push(i[o]);return new t.node.Root(e,r)},l}},function(t,n,e){function r(){throw new o.ParserException(this,{code:"not_defined"})}function i(){throw new o.ParserException(this,{code:"missing_operator"})}var o=e(2),u=e(14),a=function(){this.nud=r,this.led=i},s=function(t){this.scope=null,this.token=null,this.tokens=t,this.symbolTable={}};s.prototype.symbol=function(t,n){var e=this.symbolTable[t];return n=n||0,e?n>e.lbp&&(e.lbp=n):(e=new a,e.id=e.value=t,e.lbp=n,this.symbolTable[t]=e),e},s.prototype.expression=function(t){t=t||0;var n,e=this.token;for(this.advance(),n=e.nud();t<this.token.lbp;)e=this.token,this.advance(),n=e.led(n);return n},s.prototype.error=function(t,n){throw new o.ParserException(t,n)},s.prototype.newScope=function(){var t=this.scope;return this.scope=new u(this),this.scope.parent=t,this.scope},s.prototype.advance=function(t){var n,e,r,i,o=this.tokens;if(t&&this.token.id!==t&&(this.lastToken&&this.lastToken.range&&this.token.range&&(this.token.range.start=this.lastToken.range.start),this.error(this.token,{code:"expected_but_found",detail:{expected:t,actual:this.token.value}})),!o.hasNext()){var u=this.token.range;return this.token=this.symbolTable["(end)"],this.token.range=u,this.token}if(r=o.next(),i=r.value,n=r.type,"name"===n)e=this.scope.find(i),"routine"===e.arity&&(e=this.symbolTable["(name)"]);else if("operator"===n)e=this.symbolTable[i],e||this.error(r,{code:"unknown_operator"});else if("number"===n)e=this.symbolTable["(literal)"],n="literal",i=parseInt(i,10);else if("string"===n)e=this.symbolTable["(string)"];else{var a=r.error;this.error(a,{code:"unexpected_token",detail:{token:a.value}})}var s=Object.create(e);return s.range=r.range,s.value=i,s.arity=n,this.lastToken=this.token,this.token=s,s},s.prototype.op=function(t,n,e){var r=this,i=this.symbol(t,n);return i.led=function(t){return new e(this,t,r.expression(n))},i},s.prototype.statement=function(){var t,n=this.token;return n.std?(this.advance(),this.scope.reserve(n),n.std()):(t=this.expression(0),":="!==t.alias&&"("!==t.id&&"routine"!==t.arity&&this.error(t.token||t,{code:"bad_expression_statement"}),t)},s.prototype.statements=function(){for(var t,n=[];"}"!==this.token.id&&"(end)"!==this.token.id;){var e=this._currentRange();t=this.statement(),t&&!t.separator&&(this._applyRangeToSymbol(e,t),n.push(t))}return 0===n.length?null:n},s.prototype._applyRangeToSymbol=function(t,n){n.range=t,this.token.range&&this.token.range.end&&(t.end=this.token.range.end)},s.prototype.rootDeclaration=function(){var t=this.token;return t.root||this.error(t,{code:"no_root_declaration"}),this.advance(),this.scope.reserve(t),t.root()},s.prototype.stmt=function(t,n){var e=this.symbol(t);return e.std=n,e},s.prototype.infix=function(t,n,e){var r=this.symbol(t,n),i=this;return r.led=e||function(t){return this.left=t,this.right=i.expression(n),this.arity="binary",this},r},s.prototype.infixr=function(t,n,e){var r=this.symbol(t,n),i=this;return r.led=e||function(t){return this.left=t,this.right=i.expression(n-1),this.arity="binary",this},r},s.prototype.prefix=function(t,n){var e=this.symbol(t),r=this;return e.nud=n||function(){return r.scope.reserve(this),this.left=r.expression(70),this.arity="unary",this},e},s.prototype.root=function(t,n){var e=this.symbol(t);return e.root=n,e},s.prototype.block=function(){var t=this.token;return this.advance("{"),t.std()},s.prototype._currentRange=function(){return{start:this.token.range.start,end:this.token.range.end}},s.prototype.roots=function(){for(var t,n=[];"(end)"!==this.token.id;){var e=this._currentRange();t=this.rootDeclaration(),t&&(this._applyRangeToSymbol(e,t),n.push(t))}return 0===n.length?null:n},s.prototype._parseContextAwareNode=function(t,n){this.tokens.input(t),this.newScope(),this.advance();var e=n();return this.advance("(end)"),this.scope.pop(),e},s.prototype.parseExpression=function(t){var n=this;return this._parseContextAwareNode(t,function(){return n.expression(0)})},s.prototype.parseProgram=function(t){var n=this;return this._parseContextAwareNode(t,function(){return n.roots()})},s.prototype.parseStatements=function(t){var n=this;return this._parseContextAwareNode(t,function(){return n.statements()})},t.exports=s},function(t,n,e){function r(){return this}var i=e(2),o=function(t){this.parser=t,this.def={}};o.prototype.define=function(t){var n=this.find(t.value);if("object"==typeof n&&"name"===n.arity){var e="procedureDeclaration"===n.declaration.alias?"procedure":"function",o=n.reserved?"reserved_name":"existing_"+e;throw new i.ParserException(t,{code:o,detail:{name:t.value}})}return this.def[t.value]=t,t.reserved=!1,t.nud=r,t.led=null,t.std=null,t.lbp=0,t.scope=this.parser.scope,t},o.prototype.find=function(t){for(var n,e=this;;){if(n=e.def[t],n&&"function"!=typeof n)return e.def[t];if(e=e.parent,!e)return n=this.parser.symbolTable[t],n&&"function"!=typeof n?n:this.parser.symbolTable["(name)"]}},o.prototype.pop=function(){this.scope=this.parent},o.prototype.reserve=function(t){if("name"===t.arity&&!t.reserved){var n=this.def[t.value];if(n){if(n.reserved)return;"name"===n.arity&&t.error("Already defined.")}this.def[t.value]=t,t.reserved=!0}},t.exports=o},function(t,n,e){function r(t,n){this.from=0,this.startColumn=0,this.endColumn=0,this.row=0,this.prefix=t||"/=-<>:|&.",this.suffix=n||"=|&>.",this.punctuators="/+-*^.:|&;,()<>{}[]=",this.i=0,this.buf=null,this.buflen=0}function i(t,n){return{error:n,on:t}}function o(t){return"\r"===t||"\n"===t}function u(t){return t>="0"&&t<="9"}function a(t){return c(t)||"_"===t||"'"===t}function s(t){return c(t)||t>="0"&&t<="9"||"_"===t||"$"===t}function c(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||"á"===t||"é"===t||"í"===t||"ó"===t||"ú"===t||"ñ"===t||"Á"===t||"É"===t||"Í"===t||"Ó"===t||"Ú"===t||"Ñ"===t}var f=e(2);r.prototype.hasNext=function(){return this._skipNonTokens(),this.from<this.buflen},r.prototype.input=function(t){this.from=0,this.i=0,this.startColumn=0,this.endColumn=0,this.row=0,this.buf=t,this.buflen=t.length,this.current=null,this.nextChar=null};var l={IDENTIFIER:"name",OPERATOR:"operator",EOF:"eof",COMMENT:"comment",STRING:"string",NUMBER:"number",NEWLINE:"newline"};r.prototype.next=function(){do if(this._skipNonTokens(),this._refreshCurrentAndNextChars(),this.from>=this.buflen)return null;while(this._processComment());return this._processIdentifier()?this._consume(l.IDENTIFIER):this._processOperator()?this._consume(l.OPERATOR):this._processNumber()?this._consume(l.NUMBER):this._processString()?this._consume(l.STRING):this._processError()},r.prototype._make=function(t,n){return{type:t,value:n,range:{start:{row:this.row,column:this.startColumn},end:{row:this.row,column:this.endColumn}}}},r.prototype._consume=function(t){var n=this.buf.substring(this.from,this.i),e=this._make(t,n);return this.from=this.i,this.startColumn=this.endColumn,t===l.STRING&&this.from++,e},r.prototype._refreshCurrentAndNextChars=function(){this.current=this.buf.charAt(this.from),this.nextChar=this.buf.charAt(this.from+1)},r.prototype._processString=function(){if('"'===this.current){for(this._incrementStep(),this.from=this.i;this.i<this.buflen&&'"'!==this.buf.charAt(this.i);)if(this._incrementStep(),o(this.buf.charAt(this.i)))throw new f.ParserException(this._consume(l.STRING),{code:"expecting_final_quotes"});return!0}return!1},r.prototype._processOperator=function(){return this.punctuators.indexOf(this.current)>=0&&(this._increaseFrom(),this._processMultiCharOperator(),!0)},r.prototype._processMultiCharOperator=function(){this.prefix.indexOf(this.current)>=0&&this.suffix.indexOf(this.nextChar)>=0&&this._incrementStep()},r.prototype._processNumber=function(){if(u(this.current)){for(this._increaseFrom();this.i<this.buflen&&u(this.buf.charAt(this.i));)this._incrementStep();return!0}return!1},r.prototype._processError=function(){return this._increaseFrom(),i("Unmatched token",this._consume("UNMATCHED"))},r.prototype._resetColumnCount=function(){this.startColumn=this.endColumn},r.prototype._increaseFrom=function(){this.i=this.from+1,this.startColumn=this.startColumn+1,this.endColumn=this.startColumn},r.prototype._incrementStep=function(){this.i++,this.endColumn++},r.prototype._processIdentifier=function(){if(a(this.current)){for(this._increaseFrom();this.i<this.buflen&&s(this.buf.charAt(this.i));)this._incrementStep();return!0}return!1},r.prototype._skipNonTokens=function(){for(;this.from<this.buflen;){var t=this.buf.charAt(this.from);if(" "!==t&&"\t"!==t&&"\r"!==t&&"\n"!==t)break;o(t)?(this.row+=1,this.endColumn=0,this.startColumn=0):(this.startColumn++,this.endColumn=this.startColumn),this.from++,this.i=this.from}},r.prototype._processComment=function(){var t=this.current+this.nextChar;return this._processSingleLineComment(t)||this._processMultiLineComment(t)},r.prototype._processSingleLineComment=function(t){if("//"===t){for(;this.i<this.buflen&&!o(this.buf.charAt(this.i));)this._incrementStep();return this.from=this.i,this.row++,this.startColumn=0,this.endColumn=0,!0}},r.prototype._processMultiLineComment=function(t){if("/*"===t){for(this._incrementStep(),this._incrementStep();this.i<this.buflen&&("*"!==this.buf.charAt(this.i)||"/"!==this.buf.charAt(this.i+1));)this._incrementStep(),
o(this.buf.charAt(this.i))&&(this.endColumn=0);return this._incrementStep(),this._incrementStep(),this.from=this.i,this.endColumn=this.startColumn,!0}return!1},t.exports=r},function(t,n,e){var r=e(1);t.exports={bad_expression_statement:"Expresión inválida.",existing_procedure:"El procedimiento '<%=name%>' ya está definido.",existing_function:"La función '<%=name%>' ya está definida.",expected_but_found:"Se esperaba '<%=expected%>' pero se encontró '<%=actual%>'.",expecting_final_quotes:"Se encontraron comillas de apertura sin sus correspondientes comillas de cierre.",expecting_function_name:"Se esperaba un nombre de función",expecting_parameter_name:"Se esperaba un nombre de parámetro.",expecting_procedure_name:"Se esperaba un nombre de procedimiento.",function_must_end_with_return:"La función '<%=name%>' debe terminar con un return.",function_name_should_start_with_lowercase:"El nombre de la función '<%=name%>' debe empezar con minúscula.",infinite_loop:function(t){var n=1===t.timeout?"":"s";return"Se detectó un bucle infinito luego de esperar "+t.timeout+" segundo"+n+"."},invalid_key:"'<%=key%>' no es un identificador de tecla válido.",invalid_name:function(t){var n=t.nameType,e=r.assign({subject:"parameter"===n?"un parámetro":"index"===n?"un índice":"una variable"},t);return r.template("<%=value%> no es un nombre válido para <%=subject%>.")(e)},no_root_declaration:"Se esperaba una definición de programa, función o procedimiento.",not_a_function_or_procedure:"<%=name%> no es una función o procedimiento.",place_init_at_the_start:"El bloque INIT debe estar al comienzo del programa interactivo.",place_timeout_at_the_end:"El bloque TIMEOUT debe estar al final del programa interactivo.",procedure_name_should_start_with_uppercase:"El nombre del procedimiento '<%=name%>' debe empezar con mayúscula.",reserved_name:"El nombre '<%=name%>' no se puede usar porque es parte del lenguaje.",timeout_outside_bounds:"El argumento de TIMEOUT debe ser un número entre 1 y 60000.",unexpected_token:"El símbolo '<%=token%>' no forma parte del lenguaje.",boom_called:"<%=message%>",call_type_mismatch:"El argumento de '<%=name%>' debería ser un valor de tipo '<%=expected%>' pero se encontró uno de tipo '<%=actual%>'.",inconsistent_assignment:"La variable '<%=name%>' contenía un valor de tipo '<%=actual%>' y se intentó asignar un valor de tipo '<%=expected%>'.",no_stones:"Se intentó sacar una bolita pero ya no quedaban bolitas para sacar",out_of_board:"Te caíste del tablero por: x=<%=x%> y=<%=y%>",strings_only_allowed_in_boom:"Solo se pueden usar comillas en el procedimiento BOOM.",type_mismatch:"Se esperaba un valor de tipo '<%=expected%>' pero se encontró uno de tipo '<%=actual%>'.",undefined_procedure:"El procedimiento '<%=name%>' no se encuentra definido.",undefined_function:"La función '<%=name%>' no se encuentra definida.",undefined_literal:"La expresión literal '<%=name%>' no existe.",undefined_name:"El nombre '<%=name%>' no está definido.",wrong_arity:function(t){var n=r.assign({subject:"procedure"===t.nameType?"El procedimiento":"La función",arguments:1!==t.expected?"argumentos":"argumento",found:1!==t.actual?"encontraron":"encontró"},t);return r.template("<%=subject%> <%=name%> esperaba <%=expected%> <%=arguments%> y se <%=found%> <%=actual%>.")(n)},not_defined:"Esto no se puede hacer.",missing_operator:"Esto no se puede hacer (falta un operador).",unknown_operator:"Esto no se puede hacer (operador desconocido)."}},function(t,n,e){var r=e(1),i=e(9),o=e(4),u=function(){return Math.floor(65536*(1+Math.random()))},a=function(){var t=[],n=[],e=["program"],a=new o(9,9),s={};this.init=function(){a.init()},this.nativeRepresentations=function(){return o},this.board=function(){return a},this.put=function(t,n,e,r){var o=this.getNode(t),u=i(n).type;if(void 0!==o&&void 0!==o.type&&void 0!==u&&o.type!==u)throw new e.errors.InterpreterException(r,{code:"inconsistent_assignment",detail:{name:t,expected:o.type,actual:u}});s[t]=n},this.get=function(t){return this.getNode(t).value},this.getNode=function(t){return i(s[t])},this.all=function(){return s},this.startContext=function(n){e.push(n+"-"+u()),t.push(s),s={}},this.stopContext=function(){e.pop(),s=t.pop()},this.pushBoard=function(){n.push(a),a=a.clone()},this.popBoard=function(){a=n.pop()},this.getCurrentNames=function(){return r.clone(e)},this.init()};t.exports=a},function(t,n){t.exports=function(t,n){t.Assignment=function(t,e,r){this.token=t,this.arity=n.STM,this.alias=":=",this.left=e,this.right=r},t.Assignment.prototype.interpret=function(n){n.put(this.left.token.value,this.right.eval(n,{}),t,this.left.token)}}},function(t,n){t.exports=function(t,n){function e(n){t[n]=function(t,e,i){r.call(this,t,e,i,n)},t[n].prototype=new r}var r=function(t,e,r,i){this.alias=i,this.token=t,this.left=e,this.right=r,this.arity=n.BINARY};e("SumOperation"),t.SumOperation.prototype.eval=function(t){return this.left.eval(t)+this.right.eval(t)},e("DiffOperation"),t.DiffOperation.prototype.eval=function(t){return this.left.eval(t)-this.right.eval(t)},e("MulOperation"),t.MulOperation.prototype.eval=function(t){return this.left.eval(t)*this.right.eval(t)},e("DivOperation"),t.DivOperation.prototype.eval=function(t){return Math.floor(this.left.eval(t)/this.right.eval(t))},e("ModOperation"),t.ModOperation.prototype.eval=function(t){return this.left.eval(t)%this.right.eval(t)},e("ExpOperation"),t.ExpOperation.prototype.eval=function(t){return Math.pow(this.left.eval(t),this.right.eval(t))},e("AndOperation"),t.AndOperation.prototype.eval=function(t){return this.left.eval(t)&&this.right.eval(t)},e("OrOperation"),t.OrOperation.prototype.eval=function(t){return this.left.eval(t)||this.right.eval(t)},e("NotEqualOperation"),t.NotEqualOperation.prototype.eval=function(t){return this.left.eval(t)!==this.right.eval(t)},e("EqOperation"),t.EqOperation.prototype.eval=function(t){return this.left.eval(t)===this.right.eval(t)},e("LessOperation"),t.LessOperation.prototype.eval=function(t){return this.left.eval(t)<this.right.eval(t)},e("GraterOperation"),t.GraterOperation.prototype.eval=function(t){return this.left.eval(t)>this.right.eval(t)},e("LessEqualOperation"),t.LessEqualOperation.prototype.eval=function(t){return this.left.eval(t)<=this.right.eval(t)},e("GreaterEqualOperation"),t.GreaterEqualOperation.prototype.eval=function(t){return this.left.eval(t)>=this.right.eval(t)}}},function(t,n,e){var r=e(9);t.exports=function(t){t.If=function(t,n,e,r){this.token=t,this.alias="if",this.condition=n,this.trueBranch=e,this.falseBranch=r},t.If.prototype.interpret=function(n){return t.interpretBlock(this.condition.eval(n)?this.trueBranch:this.falseBranch,n)},t.Switch=function(t,n,e){this.token=t,this.alias="switch",this.expression=n,this.cases=e},t.Switch.prototype.interpret=function(n){for(var e=r(this.expression.eval(n,{})),i=0;i<this.cases.length;i++){var o=r(this.cases[i].case.eval(n,{})),u=o.token&&o.token.range?o.token:this.token;if(e.type!==o.type&&t.errors.throwTypeMismatch(u,e.type,o.type),o.value===e.value){t.interpretBlock(this.cases[i].body,n);break}}return n}}},function(t,n){t.exports=function(t){t.Constant=function(t,n,e,r){this.token=t,this.value=e,this.alias=n,this.type=r},t.Constant.prototype.eval=function(t,n){return n||(n={attribute:"value"}),n.attribute?this[n.attribute]:this}}},function(t,n,e){var r=e(1),i=["ARROW_LEFT","ARROW_RIGHT","ARROW_UP","ARROW_DOWN"],o=["SPACE","ENTER","TAB","BACKSPACE","DELETE","ESCAPE"],u=["PLUS","MINUS","ASTERISK","SLASH","EQUALS","L_PARENT","R_PARENT","L_BRACKET","R_BRACKET","L_ANGLEBR","R_ANGLEBR"].concat(i),a=["CTRL_ALT_SHIFT_","ALT_SHIFT_","CTRL_ALT_","CTRL_SHIFT_","CTRL_","ALT_","SHIFT_"],s=function(t){return/^[A-ZÑÁÉÍÓÚ]$/.test(t)},c=function(t){return/^[0-9]$/.test(t)},f=function(t){return s(t)||c(t)||r.includes(u,t)||r.includes(o,t)};t.exports=function(t){var n=t.substring(2),e=r.find(a,function(t){return r.startsWith(n,t)}),i=n.replace(e,"");return r.startsWith(t,"K_")&&f(i)}},function(t,n,e){var r=e(1);t.exports=function(t){t.InteractiveProgram=function(t,n){this.token=t,this.alias="interactiveProgram",this.cases=n||[]},t.InteractiveProgram.prototype.interpret=function(n){var e=this,i=function(e){if(!e)return n;try{return t.interpretBlock(e.body,n),n}catch(t){return t.context=n,{error:t}}},o=r.find(e.cases,function(t){return t.case.timeout});return{context:n,keys:r(e.cases).filter(function(t){return!t.case.timeout&&!t.case.init}).map("case.value").value(),timeout:o?o.case.timeout:null,onInit:function(){return i(r.find(e.cases,{case:{init:!0}}))},onKey:function(t){return i(r.find(e.cases,{case:{value:t}}))},onTimeout:function(){return i(o)}}}}},function(t,n,e){var r=e(3);t.exports=function(t,n){t.NumericLiteral=function(t,e){this.token=t,this.value=e,this.alias=n.NUMERIC_LITERAL},t.NumericLiteral.prototype.type=r.NUMBER,t.NumericLiteral.prototype.eval=function(t,n){return n||(n={attribute:"value"}),n.attribute?this[n.attribute]:this}}},function(t,n,e){var r={};r.errors=e(2),r.config=e(6);var i={STM:"statement",BINARY:"binary",EXPRESSION:"binary",NUMERIC_LITERAL:"NumericLiteral"};r.interpretBlock=function(t,n){t=t||[];for(var e=0;e<t.length;e++)t[e].interpret(n);return n},e(24)(r,i),e(21)(r,i),e(33)(r,i),e(35)(r,i),e(18)(r,i),e(20)(r,i),e(19)(r,i),e(34)(r,i),e(26)(r,i),e(27)(r,i),e(31)(r,i),e(32)(r,i),e(29)(r,i),e(30)(r,i),e(28)(r,i),e(23)(r,i),t.exports=r},function(t,n,e){var r=e(3),i=e(5);t.exports=function(t,n){var e=function(t){return{nameType:"function",name:t.name}};t.Opposite=function(t,e){this.token=t,this.arity=n.EXPRESSION,this.alias="opposite",this.parameters=e,this.name=r.OPPOSITE},t.Opposite.prototype.eval=function(n){var o=i(t,e(this),this.token,this.parameters,r.DIRECTION,{context:n});return o.map(function(t){return-t})},t.HasStones=function(t,e){this.token=t,this.arity=n.EXPRESSION,this.alias="hasStones",this.parameters=e,this.name=r.HAS_STONES},t.HasStones.prototype.eval=function(n){var o=i(t,e(this),this.token,this.parameters,r.COLOR,{context:n});return n.board().amountStones(o)>0},t.CanMove=function(t,e){this.token=t,this.arity=n.EXPRESSION,this.alias="canMove",this.parameters=e,this.name=r.CAN_MOVE},t.CanMove.prototype.eval=function(n){var o=i(t,e(this),this.token,this.parameters,r.DIRECTION,{context:n});return n.board().canMove(o)},t.NumStones=function(t,e){this.token=t,this.arity=n.EXPRESSION,this.alias="numStones",this.parameters=e,this.name=r.NUM_STONES},t.NumStones.prototype.eval=function(n){var o=i(t,e(this),this.token,this.parameters,r.COLOR,{context:n});return n.board().amountStones(o)},t.MinDir=function(t,e){this.token=t,this.arity=n.EXPRESSION,this.alias="minDir",this.parameters=e,this.name=r.MIN_DIR},t.MinDir.prototype.eval=function(t){return t.nativeRepresentations().minDir},t.MaxDir=function(t,e){this.token=t,this.arity=n.EXPRESSION,this.alias="maxDir",this.parameters=e,this.name=r.MAX_DIR},t.MaxDir.prototype.eval=function(t){return t.nativeRepresentations().maxDir},t.MaxColor=function(t,e){this.token=t,this.arity=n.EXPRESSION,this.alias="maxColor",this.parameters=e,this.name=r.MAX_COLOR},t.MaxColor.prototype.eval=function(t){return t.nativeRepresentations().maxColor},t.MinColor=function(t,e){this.token=t,this.arity=n.EXPRESSION,this.alias="minColor",this.parameters=e,this.name=r.MIN_COLOR},t.MinColor.prototype.eval=function(t){return t.nativeRepresentations().minColor},t.MinBool=function(t,e){this.token=t,this.arity=n.EXPRESSION,this.alias="minBool",this.parameters=e,this.name=r.MIN_BOOL},t.MinBool.prototype.eval=function(){return!1},t.MaxBool=function(t,e){this.token=t,this.arity=n.EXPRESSION,this.alias="maxBool",this.parameters=e,this.name=r.MAX_BOOL},t.MaxBool.prototype.eval=function(){return!0}}},function(t,n,e){var r=e(3),i=e(5);t.exports=function(t,n){var e=function(t,n){return{token:t.token,names:n.getCurrentNames()}},o=function(t){return{nameType:"procedure",name:t.name}};t.MoveClaw=function(t,e){this.token=t,this.arity=n.STM,this.alias="MoveClaw",this.parameters=e,this.name=r.MOVE},t.MoveClaw.prototype.interpret=function(n){var u=i(t,o(this),this.token,this.parameters,r.DIRECTION,{context:n});try{n.board().move(u,e(this,n))}catch(t){throw t.on=this.token,t}return n},t.RemoveStone=function(t,e){this.token=t,this.arity=n.STM,this.alias="Grab",this.parameters=e,this.name=r.GRAB},t.RemoveStone.prototype.interpret=function(n){var u=i(t,o(this),this.token,this.parameters,r.COLOR,{context:n});try{n.board().removeStone(u,e(this,n))}catch(t){throw t.on=this.token,t}return n},t.PutStone=function(t,e){this.token=t,this.arity=n.STM,this.alias="Drop",this.parameters=e,this.name=r.DROP},t.PutStone.prototype.interpret=function(n){var u=i(t,o(this),this.token,this.parameters,r.COLOR,{context:n});return n.board().putStone(u,e(this,n)),n},t.MoveToEdge=function(t,e){this.token=t,this.arity=n.STM,this.alias="MoveToEdge",this.parameters=e,this.name=r.MOVE_TO_EDGE},t.MoveToEdge.prototype.interpret=function(n){var u=i(t,o(this),this.token,this.parameters,r.DIRECTION,{context:n});return n.board().moveToEdge(u,e(this,n)),n},t.CleanBoard=function(t,e){this.token=t,this.arity=n.STM,this.alias="CleanBoard",this.parameters=e,this.name=r.CLEAN_BOARD},t.CleanBoard.prototype.interpret=function(t){return t.board().clear(e(this,t)),t},t.Boom=function(t,e){this.token=t,this.arity=n.STM,this.alias="BOOM",this.parameters=e,this.name=r.BOOM},t.Boom.prototype.interpret=function(n){try{var u=i(t,o(this),this.token,this.parameters,r.STRING,{context:n,options:{boom:!0}});n.board().boom(u,e(this,n))}catch(t){throw t.on=this.token,t}return n}}},function(t,n,e){var r=e(1);t.exports=function(t){t.Program=function(t,n){this.token=t,this.alias="program",this.body=n||[];var e=r.last(this.body);e&&"return"===e.alias&&(this.returnSentence=this.body.pop())},t.Program.prototype.interpret=function(n){try{t.interpretBlock(this.body,n),this._setExitStatus(n)}catch(t){throw t.context=n,t}return n},t.Program.prototype._setExitStatus=function(t){this.returnSentence&&(t.exitStatus=this.returnSentence.expression.eval(t))}}},function(t,n){t.exports=function(t){t.While=function(t,n,e){this.alias="while",this.token=t,this.expression=n,this.body=e},t.While.prototype.interpret=function(n){for(var e=Date.now();this.expression.eval(n);)if(t.interpretBlock(this.body,n),Date.now()-e>t.config.LOOP_TIMEOUT)throw new t.errors.InterpreterException(this.token,{code:"infinite_loop",detail:{timeout:t.config.LOOP_TIMEOUT/1e3}});return n},t.Repeat=function(t,n,e){this.alias="repeat",this.token=t,this.expression=n,this.body=e},t.Repeat.prototype.interpret=function(n){for(var e=this.expression.eval(n),r=0;r<e;r++)t.interpretBlock(this.body,n);return n},t.ForEach=function(t,n,e,r){this.alias="foreach",this.token=t,this.iterator=n,this.items=e,this.body=r},t.ForEach.prototype.interpret=function(n){for(var e=0;e<this.items.length;e++)n.put(this.iterator.token.value,this.items[e].eval(n,{}),t,this.token),t.interpretBlock(this.body,n);return n}}},function(t,n){t.exports=function(t){t.Root=function(t,n){this.alias="root",this.program=t,this.declarations=n},t.Root.prototype.interpret=function(t){return this.program.interpret(t)}}},function(t,n,e){var r=e(5),i=function(t){return"procedureDeclaration"===t.alias?"procedure":"function"};t.exports=function(t){function n(n,e,o,u,a){var s=[];if(u)for(var c=0;c<u.length;c++){var f=r(t,{nameType:i(e),name:e.name},n,[u[c]],void 0,{context:o,options:a});s.push(f)}return s}function e(t,n,e,r,o){if(e.parameters){if(e.parameters.length!==n.length)throw new r.errors.InterpreterException(o,{code:"wrong_arity",detail:{nameType:i(e),name:e.name,expected:e.parameters.length,actual:n.length}});for(var u=0;u<e.parameters.length;u++)t.put(e.parameters[u].value,n[u],r,o)}}t.ProcedureCall=function(t,n,e){this.token=t,this.arity="routine",this.alias="ProcedureCall",this.name=t.value,this.parameters=e,this.declarationProvider=n},t.ProcedureCall.prototype.interpret=function(r){var i=this.declarationProvider();if(!i.declaration)throw new t.errors.InterpreterException(this,{code:"undefined_procedure",detail:{name:this.name}});var o=i.declaration,u=n(this.token,o,r,this.parameters,{});return r.startContext(this.name),e(r,u,o,t,this.token),t.interpretBlock(o.body,r),r.stopContext(),r},t.FunctionCall=function(t,n,e){this.token=t,this.arity="routine",this.alias="FunctionCall",this.name=t.value,this.parameters=e,this.declarationProvider=n},t.FunctionCall.prototype.eval=function(r,i){var o=this.declarationProvider();if(!o.declaration)throw new t.errors.InterpreterException(this.token,{code:"undefined_function",detail:{name:this.name}});var u=o.declaration,a=n(this.token,u,r,this.parameters,{});r.startContext(this.name),r.pushBoard(),e(r,a,u,t,this.token),t.interpretBlock(u.body,r);var s=u.return.expression.eval(r,i);return r.popBoard(),r.stopContext(),s}}},function(t,n){t.exports=function(t){t.ProcedureDeclaration=function(t,n,e){this.token=t,this.name=t.value,this.arity="routine",this.alias="procedureDeclaration",this.parameters=n||[],this.body=e||[]},t.FunctionDeclaration=function(t,n,e,r){this.token=t,this.name=t.value,this.arity="routine",this.alias="functionDeclaration",this.parameters=n||[],this.body=e||[],this.return=r},t.ReturnStatement=function(t,n){this.token=t,this.alias="return",this.expression=n},t.ReturnStatement.prototype.interpret=function(n){return t.errors.throwParserError(this.token,"Solo puede usarse return como última sentencia de una función o programa."),n}}},function(t,n){t.exports=function(t){t.String=function(t,n){this.token=t,this.value=n},t.String.prototype.type="string",t.String.prototype.eval=function(n,e){if(e&&e.boom)return this.value;throw new t.errors.InterpreterException(this.token,{code:"strings_only_allowed_in_boom"})}}},function(t,n){t.exports=function(t){t.NotOperation=function(t,n){this.token=t,this.expression=n,this.alias="not"},t.NotOperation.prototype.eval=function(t){return!this.expression.eval(t)},t.SubstractionOperation=function(t,n){this.token=t,this.expression=n,this.alias="-"},t.SubstractionOperation.prototype.eval=function(t){return-this.expression.eval(t)}}},function(t,n){t.exports=function(t){return t.Variable=function(t,n){this.token=t,this.value=n},t.Variable.prototype.eval=function(t,n){n||(n={method:"get"});var e=this.value;return n.method?t[n.method](e):t.getNode(e)},t}},function(t,n){t.exports={splitByLines:function(t){return t.split(/\r\n|\r|\n/)},scan:function(t,n){if(!n.global)throw new Error('The regExp must be global (with "g" flag)');var e=[],r=e;for(e=n.exec(t);e;)e.shift(),r.push(e),e=n.exec(t);return r}}},function(t,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}}])});
//# sourceMappingURL=index.umd.min.js.map